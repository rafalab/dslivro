<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 14 Variáveis aleatórias | Introdução à Ciência de Dados</title>
  <meta name="description" content="Este livro apresenta conceitos e habilidades que ajudarão você a enfrentar os desafios da vida real em análise de dados. Ele abrange conceitos de probabilidade, inferência estatística, regressão linear e aprendizado de máquina. Além disso, permitirá que você desenvolva habilidades como programação em R, manipulação de dados com dplyr, visualização de dados com ggplot2, organização de arquivos no ambiente UNIX/Linux, controle de versão com GitHub e elaboração de documentos reprodutíveis com Rmarkdown." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 14 Variáveis aleatórias | Introdução à Ciência de Dados" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este livro apresenta conceitos e habilidades que ajudarão você a enfrentar os desafios da vida real em análise de dados. Ele abrange conceitos de probabilidade, inferência estatística, regressão linear e aprendizado de máquina. Além disso, permitirá que você desenvolva habilidades como programação em R, manipulação de dados com dplyr, visualização de dados com ggplot2, organização de arquivos no ambiente UNIX/Linux, controle de versão com GitHub e elaboração de documentos reprodutíveis com Rmarkdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 14 Variáveis aleatórias | Introdução à Ciência de Dados" />
  
  <meta name="twitter:description" content="Este livro apresenta conceitos e habilidades que ajudarão você a enfrentar os desafios da vida real em análise de dados. Ele abrange conceitos de probabilidade, inferência estatística, regressão linear e aprendizado de máquina. Além disso, permitirá que você desenvolva habilidades como programação em R, manipulação de dados com dplyr, visualização de dados com ggplot2, organização de arquivos no ambiente UNIX/Linux, controle de versão com GitHub e elaboração de documentos reprodutíveis com Rmarkdown." />
  

<meta name="author" content="Rafael A. Irizarry" />


<meta name="date" content="2020-11-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="probabilidade.html"/>

<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução à Ciência de Dados</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefácio</a></li>
<li class="chapter" data-level="" data-path="agradecimentos.html"><a href="agradecimentos.html"><i class="fa fa-check"></i>Agradecimentos</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html"><i class="fa fa-check"></i>Introdução</a>
<ul>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#estudos-de-caso"><i class="fa fa-check"></i>Estudos de Caso</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#quem-achará-este-livro-útil"><i class="fa fa-check"></i>Quem achará este livro útil?</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#o-que-este-livro-cobre"><i class="fa fa-check"></i>O que este livro cobre?</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#o-que-este-livro-não-cobre"><i class="fa fa-check"></i>O que este livro não cobre?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Introdução ao R e RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#por-que-r"><i class="fa fa-check"></i><b>1.1</b> Por que R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#o-console-do-r"><i class="fa fa-check"></i><b>1.2</b> O console do R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#scripts"><i class="fa fa-check"></i><b>1.3</b> <em>Scripts</em></a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i><b>1.4</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#painéis"><i class="fa fa-check"></i><b>1.4.1</b> Painéis</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#combinações-de-teclas-atalhos"><i class="fa fa-check"></i><b>1.4.2</b> Combinações de teclas (atalhos)</a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#como-executar-comandos-enquanto-edita-scripts"><i class="fa fa-check"></i><b>1.4.3</b> Como executar comandos enquanto edita <em>scripts</em></a></li>
<li class="chapter" data-level="1.4.4" data-path="getting-started.html"><a href="getting-started.html#como-alterar-opções-globais"><i class="fa fa-check"></i><b>1.4.4</b> Como alterar opções globais</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#instalando-pacotes-r"><i class="fa fa-check"></i><b>1.5</b> Instalando pacotes R</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="2" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>2</b> R básico</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-basics.html"><a href="r-basics.html#estudo-de-caso-assassinatos-por-armas-nos-eua"><i class="fa fa-check"></i><b>2.1</b> Estudo de caso: assassinatos por armas nos EUA</a></li>
<li class="chapter" data-level="2.2" data-path="r-basics.html"><a href="r-basics.html#os-princípios-básicos"><i class="fa fa-check"></i><b>2.2</b> Os princípios básicos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-basics.html"><a href="r-basics.html#objetos"><i class="fa fa-check"></i><b>2.2.1</b> Objetos</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-basics.html"><a href="r-basics.html#a-área-de-trabalho-workspace"><i class="fa fa-check"></i><b>2.2.2</b> A área de trabalho (<em>workspace</em>)</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-basics.html"><a href="r-basics.html#funções"><i class="fa fa-check"></i><b>2.2.3</b> Funções</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-basics.html"><a href="r-basics.html#outros-objetos-pré-construídos"><i class="fa fa-check"></i><b>2.2.4</b> Outros objetos pré-construídos</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-basics.html"><a href="r-basics.html#nomes-de-variáveis"><i class="fa fa-check"></i><b>2.2.5</b> Nomes de variáveis</a></li>
<li class="chapter" data-level="2.2.6" data-path="r-basics.html"><a href="r-basics.html#como-salvar-sua-área-de-trabalho"><i class="fa fa-check"></i><b>2.2.6</b> Como salvar sua área de trabalho</a></li>
<li class="chapter" data-level="2.2.7" data-path="r-basics.html"><a href="r-basics.html#fundamentando-o-uso-de-scripts"><i class="fa fa-check"></i><b>2.2.7</b> Fundamentando o uso de <em>scripts</em></a></li>
<li class="chapter" data-level="2.2.8" data-path="r-basics.html"><a href="r-basics.html#como-comentar-seu-código"><i class="fa fa-check"></i><b>2.2.8</b> Como comentar seu código</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-basics.html"><a href="r-basics.html#exercícios"><i class="fa fa-check"></i><b>2.3</b> Exercícios</a></li>
<li class="chapter" data-level="2.4" data-path="r-basics.html"><a href="r-basics.html#tipos-de-dados"><i class="fa fa-check"></i><b>2.4</b> Tipos de dados</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="r-basics.html"><a href="r-basics.html#data-frames"><i class="fa fa-check"></i><b>2.4.1</b> <em>Data frames</em></a></li>
<li class="chapter" data-level="2.4.2" data-path="r-basics.html"><a href="r-basics.html#examinando-um-objeto"><i class="fa fa-check"></i><b>2.4.2</b> Examinando um objeto</a></li>
<li class="chapter" data-level="2.4.3" data-path="r-basics.html"><a href="r-basics.html#o-operador-de-acesso"><i class="fa fa-check"></i><b>2.4.3</b> O operador de acesso: <code>$</code></a></li>
<li class="chapter" data-level="2.4.4" data-path="r-basics.html"><a href="r-basics.html#vetores-numéricos-caracteres-e-lógicos"><i class="fa fa-check"></i><b>2.4.4</b> Vetores: numéricos, caracteres e lógicos</a></li>
<li class="chapter" data-level="2.4.5" data-path="r-basics.html"><a href="r-basics.html#fatores-factors"><i class="fa fa-check"></i><b>2.4.5</b> Fatores (<em>factors</em>)</a></li>
<li class="chapter" data-level="2.4.6" data-path="r-basics.html"><a href="r-basics.html#listas"><i class="fa fa-check"></i><b>2.4.6</b> Listas</a></li>
<li class="chapter" data-level="2.4.7" data-path="r-basics.html"><a href="r-basics.html#matrizes"><i class="fa fa-check"></i><b>2.4.7</b> Matrizes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r-basics.html"><a href="r-basics.html#exercícios-1"><i class="fa fa-check"></i><b>2.5</b> Exercícios</a></li>
<li class="chapter" data-level="2.6" data-path="r-basics.html"><a href="r-basics.html#vetores"><i class="fa fa-check"></i><b>2.6</b> Vetores</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="r-basics.html"><a href="r-basics.html#criando-vetores"><i class="fa fa-check"></i><b>2.6.1</b> Criando vetores</a></li>
<li class="chapter" data-level="2.6.2" data-path="r-basics.html"><a href="r-basics.html#nomes"><i class="fa fa-check"></i><b>2.6.2</b> Nomes</a></li>
<li class="chapter" data-level="2.6.3" data-path="r-basics.html"><a href="r-basics.html#sequências"><i class="fa fa-check"></i><b>2.6.3</b> Sequências</a></li>
<li class="chapter" data-level="2.6.4" data-path="r-basics.html"><a href="r-basics.html#criando-subconjuntos"><i class="fa fa-check"></i><b>2.6.4</b> Criando subconjuntos</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="r-basics.html"><a href="r-basics.html#conversão-forçada"><i class="fa fa-check"></i><b>2.7</b> Conversão forçada</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="r-basics.html"><a href="r-basics.html#valores-na"><i class="fa fa-check"></i><b>2.7.1</b> Valores NA</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="r-basics.html"><a href="r-basics.html#exercícios-2"><i class="fa fa-check"></i><b>2.8</b> Exercícios</a></li>
<li class="chapter" data-level="2.9" data-path="r-basics.html"><a href="r-basics.html#ordenação"><i class="fa fa-check"></i><b>2.9</b> Ordenação</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="r-basics.html"><a href="r-basics.html#sort"><i class="fa fa-check"></i><b>2.9.1</b> <code>sort</code></a></li>
<li class="chapter" data-level="2.9.2" data-path="r-basics.html"><a href="r-basics.html#order"><i class="fa fa-check"></i><b>2.9.2</b> <code>order</code></a></li>
<li class="chapter" data-level="2.9.3" data-path="r-basics.html"><a href="r-basics.html#max-e-which.max"><i class="fa fa-check"></i><b>2.9.3</b> <code>max</code> e <code>which.max</code></a></li>
<li class="chapter" data-level="2.9.4" data-path="r-basics.html"><a href="r-basics.html#rank"><i class="fa fa-check"></i><b>2.9.4</b> <code>rank</code></a></li>
<li class="chapter" data-level="2.9.5" data-path="r-basics.html"><a href="r-basics.html#cuidado-com-a-reciclagem"><i class="fa fa-check"></i><b>2.9.5</b> Cuidado com a reciclagem</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="r-basics.html"><a href="r-basics.html#exercícios-3"><i class="fa fa-check"></i><b>2.10</b> Exercícios</a></li>
<li class="chapter" data-level="2.11" data-path="r-basics.html"><a href="r-basics.html#aritmética-vetorial"><i class="fa fa-check"></i><b>2.11</b> Aritmética vetorial</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="r-basics.html"><a href="r-basics.html#reescalonando-um-vetor"><i class="fa fa-check"></i><b>2.11.1</b> Reescalonando um vetor</a></li>
<li class="chapter" data-level="2.11.2" data-path="r-basics.html"><a href="r-basics.html#dois-vetores"><i class="fa fa-check"></i><b>2.11.2</b> Dois vetores</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="r-basics.html"><a href="r-basics.html#exercícios-4"><i class="fa fa-check"></i><b>2.12</b> Exercícios</a></li>
<li class="chapter" data-level="2.13" data-path="r-basics.html"><a href="r-basics.html#indexação"><i class="fa fa-check"></i><b>2.13</b> Indexação</a>
<ul>
<li class="chapter" data-level="2.13.1" data-path="r-basics.html"><a href="r-basics.html#criando-subconjuntos-com-objetos-do-tipo-lógico"><i class="fa fa-check"></i><b>2.13.1</b> Criando subconjuntos com objetos do tipo lógico</a></li>
<li class="chapter" data-level="2.13.2" data-path="r-basics.html"><a href="r-basics.html#operadores-lógicos"><i class="fa fa-check"></i><b>2.13.2</b> Operadores lógicos</a></li>
<li class="chapter" data-level="2.13.3" data-path="r-basics.html"><a href="r-basics.html#which"><i class="fa fa-check"></i><b>2.13.3</b> <code>which</code></a></li>
<li class="chapter" data-level="2.13.4" data-path="r-basics.html"><a href="r-basics.html#match"><i class="fa fa-check"></i><b>2.13.4</b> <code>match</code></a></li>
<li class="chapter" data-level="2.13.5" data-path="r-basics.html"><a href="r-basics.html#in"><i class="fa fa-check"></i><b>2.13.5</b> <code>%in%</code></a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="r-basics.html"><a href="r-basics.html#exercícios-5"><i class="fa fa-check"></i><b>2.14</b> Exercícios</a></li>
<li class="chapter" data-level="2.15" data-path="r-basics.html"><a href="r-basics.html#gráficos-básicos"><i class="fa fa-check"></i><b>2.15</b> Gráficos básicos</a>
<ul>
<li class="chapter" data-level="2.15.1" data-path="r-basics.html"><a href="r-basics.html#plot"><i class="fa fa-check"></i><b>2.15.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="2.15.2" data-path="r-basics.html"><a href="r-basics.html#hist"><i class="fa fa-check"></i><b>2.15.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="2.15.3" data-path="r-basics.html"><a href="r-basics.html#boxplot"><i class="fa fa-check"></i><b>2.15.3</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="2.15.4" data-path="r-basics.html"><a href="r-basics.html#image"><i class="fa fa-check"></i><b>2.15.4</b> <code>image</code></a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="r-basics.html"><a href="r-basics.html#exercícios-6"><i class="fa fa-check"></i><b>2.16</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html"><i class="fa fa-check"></i><b>3</b> Conceitos básicos de programação</a>
<ul>
<li class="chapter" data-level="3.1" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#conditionals"><i class="fa fa-check"></i><b>3.1</b> Expressões condicionais</a></li>
<li class="chapter" data-level="3.2" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#como-definir-funções"><i class="fa fa-check"></i><b>3.2</b> Como definir funções</a></li>
<li class="chapter" data-level="3.3" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#namespaces"><i class="fa fa-check"></i><b>3.3</b> <em>Namespaces</em></a></li>
<li class="chapter" data-level="3.4" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#laços-do-tipo-for"><i class="fa fa-check"></i><b>3.4</b> Laços do tipo for</a></li>
<li class="chapter" data-level="3.5" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#vectorization"><i class="fa fa-check"></i><b>3.5</b> Vectorização e funcionais</a></li>
<li class="chapter" data-level="3.6" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#exercícios-7"><i class="fa fa-check"></i><b>3.6</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>4</b> <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data"><i class="fa fa-check"></i><b>4.1</b> Data <em>tidy</em></a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-8"><i class="fa fa-check"></i><b>4.2</b> Exercícios</a></li>
<li class="chapter" data-level="4.3" data-path="tidyverse.html"><a href="tidyverse.html#como-manipular-data-frames"><i class="fa fa-check"></i><b>4.3</b> Como manipular <em>data frames</em></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tidyverse.html"><a href="tidyverse.html#como-adicionar-uma-coluna-com-mutate"><i class="fa fa-check"></i><b>4.3.1</b> Como adicionar uma coluna com <code>mutate</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="tidyverse.html"><a href="tidyverse.html#como-criar-subconjuntos-com-filter"><i class="fa fa-check"></i><b>4.3.2</b> Como criar subconjuntos com <code>filter</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="tidyverse.html"><a href="tidyverse.html#como-selecionar-colunas-com-select"><i class="fa fa-check"></i><b>4.3.3</b> Como selecionar colunas com <code>select</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-9"><i class="fa fa-check"></i><b>4.4</b> Exercícios</a></li>
<li class="chapter" data-level="4.5" data-path="tidyverse.html"><a href="tidyverse.html#o-cano_"><i class="fa fa-check"></i><b>4.5</b> O cano_: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.6" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-10"><i class="fa fa-check"></i><b>4.6</b> Exercícios</a></li>
<li class="chapter" data-level="4.7" data-path="tidyverse.html"><a href="tidyverse.html#como-resumir-dados"><i class="fa fa-check"></i><b>4.7</b> Como resumir dados</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="tidyverse.html"><a href="tidyverse.html#summarize"><i class="fa fa-check"></i><b>4.7.1</b> <code>summarize</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="tidyverse.html"><a href="tidyverse.html#pull"><i class="fa fa-check"></i><b>4.7.2</b> <code>pull</code></a></li>
<li class="chapter" data-level="4.7.3" data-path="tidyverse.html"><a href="tidyverse.html#group-by"><i class="fa fa-check"></i><b>4.7.3</b> Como agrupar e resumir com <code>group_by</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="tidyverse.html"><a href="tidyverse.html#como-encomendar-os-data-frames"><i class="fa fa-check"></i><b>4.8</b> Como encomendar os <em>data frames</em></a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="tidyverse.html"><a href="tidyverse.html#como-encomendar-aninhado"><i class="fa fa-check"></i><b>4.8.1</b> Como encomendar aninhado</a></li>
<li class="chapter" data-level="4.8.2" data-path="tidyverse.html"><a href="tidyverse.html#os-primeiros-n"><i class="fa fa-check"></i><b>4.8.2</b> Os primeiros <span class="math inline">\(n\)</span></a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-11"><i class="fa fa-check"></i><b>4.9</b> Exercícios</a></li>
<li class="chapter" data-level="4.10" data-path="tidyverse.html"><a href="tidyverse.html#tibbles"><i class="fa fa-check"></i><b>4.10</b> <em>Tibbles</em></a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="tidyverse.html"><a href="tidyverse.html#tibbles-parece-melhor"><i class="fa fa-check"></i><b>4.10.1</b> <em>Tibbles</em> parece melhor</a></li>
<li class="chapter" data-level="4.10.2" data-path="tidyverse.html"><a href="tidyverse.html#tibbles_subconjuntos-são_tibbles"><i class="fa fa-check"></i><b>4.10.2</b> <em>Tibbles_subconjuntos são_tibbles</em></a></li>
<li class="chapter" data-level="4.10.3" data-path="tidyverse.html"><a href="tidyverse.html#tibbles-pode-ter-entradas-complexas"><i class="fa fa-check"></i><b>4.10.3</b> <em>Tibbles</em> pode ter entradas complexas</a></li>
<li class="chapter" data-level="4.10.4" data-path="tidyverse.html"><a href="tidyverse.html#tibbles-podem-ser-agrupados"><i class="fa fa-check"></i><b>4.10.4</b> <em>Tibbles</em> podem ser agrupados</a></li>
<li class="chapter" data-level="4.10.5" data-path="tidyverse.html"><a href="tidyverse.html#como-criar-um-tibble-usando-tibble-ao-invés-de-data.frame"><i class="fa fa-check"></i><b>4.10.5</b> Como criar um <em>tibble</em> usando <code>tibble</code> ao invés de <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="tidyverse.html"><a href="tidyverse.html#o-operador-de-ponto"><i class="fa fa-check"></i><b>4.11</b> O operador de ponto</a></li>
<li class="chapter" data-level="4.12" data-path="tidyverse.html"><a href="tidyverse.html#do"><i class="fa fa-check"></i><b>4.12</b> <code>do</code></a></li>
<li class="chapter" data-level="4.13" data-path="tidyverse.html"><a href="tidyverse.html#o-pacote-purrr"><i class="fa fa-check"></i><b>4.13</b> O pacote <strong>purrr</strong></a></li>
<li class="chapter" data-level="4.14" data-path="tidyverse.html"><a href="tidyverse.html#os-condicionais-tidyverse"><i class="fa fa-check"></i><b>4.14</b> Os condicionais <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.14.1" data-path="tidyverse.html"><a href="tidyverse.html#case_when"><i class="fa fa-check"></i><b>4.14.1</b> <code>case_when</code></a></li>
<li class="chapter" data-level="4.14.2" data-path="tidyverse.html"><a href="tidyverse.html#between"><i class="fa fa-check"></i><b>4.14.2</b> <code>between</code></a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-12"><i class="fa fa-check"></i><b>4.15</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>5</b> Importando dados</a>
<ul>
<li class="chapter" data-level="5.1" data-path="importing-data.html"><a href="importing-data.html#caminhos-e-diretório-de-trabalho"><i class="fa fa-check"></i><b>5.1</b> Caminhos e diretório de trabalho</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="importing-data.html"><a href="importing-data.html#sistema-de-arquivos"><i class="fa fa-check"></i><b>5.1.1</b> Sistema de arquivos</a></li>
<li class="chapter" data-level="5.1.2" data-path="importing-data.html"><a href="importing-data.html#caminhos-relativos-e-absolutos"><i class="fa fa-check"></i><b>5.1.2</b> Caminhos relativos e absolutos</a></li>
<li class="chapter" data-level="5.1.3" data-path="importing-data.html"><a href="importing-data.html#o-diretório-de-trabalho"><i class="fa fa-check"></i><b>5.1.3</b> O diretório de trabalho</a></li>
<li class="chapter" data-level="5.1.4" data-path="importing-data.html"><a href="importing-data.html#gerando-nomes-de-caminhos"><i class="fa fa-check"></i><b>5.1.4</b> Gerando nomes de caminhos</a></li>
<li class="chapter" data-level="5.1.5" data-path="importing-data.html"><a href="importing-data.html#copiando-arquivos-usando-caminhos"><i class="fa fa-check"></i><b>5.1.5</b> Copiando arquivos usando caminhos</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="importing-data.html"><a href="importing-data.html#os-pacotes-readr-e-readxl"><i class="fa fa-check"></i><b>5.2</b> Os pacotes readr e readxl</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="importing-data.html"><a href="importing-data.html#readr"><i class="fa fa-check"></i><b>5.2.1</b> readr</a></li>
<li class="chapter" data-level="5.2.2" data-path="importing-data.html"><a href="importing-data.html#readxl"><i class="fa fa-check"></i><b>5.2.2</b> readxl</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="importing-data.html"><a href="importing-data.html#exercícios-13"><i class="fa fa-check"></i><b>5.3</b> Exercícios</a></li>
<li class="chapter" data-level="5.4" data-path="importing-data.html"><a href="importing-data.html#como-fazer-download-de-arquivos"><i class="fa fa-check"></i><b>5.4</b> Como fazer <em>download</em> de arquivos</a></li>
<li class="chapter" data-level="5.5" data-path="importing-data.html"><a href="importing-data.html#funções-básicas-de-importação-do-r"><i class="fa fa-check"></i><b>5.5</b> Funções básicas de importação do R</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="importing-data.html"><a href="importing-data.html#scan"><i class="fa fa-check"></i><b>5.5.1</b> <code>scan</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="importing-data.html"><a href="importing-data.html#arquivos-de-texto-versus-arquivos-binários"><i class="fa fa-check"></i><b>5.6</b> Arquivos de texto versus arquivos binários</a></li>
<li class="chapter" data-level="5.7" data-path="importing-data.html"><a href="importing-data.html#unicode-versus-ascii"><i class="fa fa-check"></i><b>5.7</b> Unicode versus ASCII</a></li>
<li class="chapter" data-level="5.8" data-path="importing-data.html"><a href="importing-data.html#como-organizar-dados-com-planilhas"><i class="fa fa-check"></i><b>5.8</b> Como organizar dados com planilhas</a></li>
<li class="chapter" data-level="5.9" data-path="importing-data.html"><a href="importing-data.html#exercícios-14"><i class="fa fa-check"></i><b>5.9</b> Exercícios</a></li>
</ul></li>
<li class="part"><span><b>II Exibição de dados</b></span></li>
<li class="chapter" data-level="6" data-path="introdução-à-visualização-de-dados.html"><a href="introdução-à-visualização-de-dados.html"><i class="fa fa-check"></i><b>6</b> Introdução à visualização de dados</a></li>
<li class="chapter" data-level="7" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>7</b> ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ggplot2.html"><a href="ggplot2.html#os-componentes-de-um-gráfico"><i class="fa fa-check"></i><b>7.1</b> Os componentes de um gráfico</a></li>
<li class="chapter" data-level="7.2" data-path="ggplot2.html"><a href="ggplot2.html#objetos-ggplot"><i class="fa fa-check"></i><b>7.2</b> Objetos <code>ggplot</code></a></li>
<li class="chapter" data-level="7.3" data-path="ggplot2.html"><a href="ggplot2.html#geometrias"><i class="fa fa-check"></i><b>7.3</b> Geometrias</a></li>
<li class="chapter" data-level="7.4" data-path="ggplot2.html"><a href="ggplot2.html#mapeamentos-estéticos"><i class="fa fa-check"></i><b>7.4</b> Mapeamentos estéticos</a></li>
<li class="chapter" data-level="7.5" data-path="ggplot2.html"><a href="ggplot2.html#camadas"><i class="fa fa-check"></i><b>7.5</b> Camadas</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ggplot2.html"><a href="ggplot2.html#trabalhando-com-argumentos"><i class="fa fa-check"></i><b>7.5.1</b> Trabalhando com argumentos</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ggplot2.html"><a href="ggplot2.html#mapeamento-estético-global-versus-local"><i class="fa fa-check"></i><b>7.6</b> Mapeamento estético global versus local</a></li>
<li class="chapter" data-level="7.7" data-path="ggplot2.html"><a href="ggplot2.html#escalas"><i class="fa fa-check"></i><b>7.7</b> Escalas</a></li>
<li class="chapter" data-level="7.8" data-path="ggplot2.html"><a href="ggplot2.html#rótulos-e-títulos"><i class="fa fa-check"></i><b>7.8</b> Rótulos e títulos</a></li>
<li class="chapter" data-level="7.9" data-path="ggplot2.html"><a href="ggplot2.html#usando-categorias-como-cores"><i class="fa fa-check"></i><b>7.9</b> Usando categorias como cores</a></li>
<li class="chapter" data-level="7.10" data-path="ggplot2.html"><a href="ggplot2.html#anotações-formas-e-ajustes"><i class="fa fa-check"></i><b>7.10</b> Anotações, formas e ajustes</a></li>
<li class="chapter" data-level="7.11" data-path="ggplot2.html"><a href="ggplot2.html#add-on-packages"><i class="fa fa-check"></i><b>7.11</b> Pacotes complementares</a></li>
<li class="chapter" data-level="7.12" data-path="ggplot2.html"><a href="ggplot2.html#como-combinar-tudo"><i class="fa fa-check"></i><b>7.12</b> Como combinar tudo</a></li>
<li class="chapter" data-level="7.13" data-path="ggplot2.html"><a href="ggplot2.html#qplot"><i class="fa fa-check"></i><b>7.13</b> Gráficos rápidos com <code>qplot</code></a></li>
<li class="chapter" data-level="7.14" data-path="ggplot2.html"><a href="ggplot2.html#grade-de-gráficos"><i class="fa fa-check"></i><b>7.14</b> Grade de gráficos</a></li>
<li class="chapter" data-level="7.15" data-path="ggplot2.html"><a href="ggplot2.html#exercícios-15"><i class="fa fa-check"></i><b>7.15</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>8</b> Visualizando distribuições de dados</a>
<ul>
<li class="chapter" data-level="8.1" data-path="distributions.html"><a href="distributions.html#tipos-de-variáveis"><i class="fa fa-check"></i><b>8.1</b> Tipos de variáveis</a></li>
<li class="chapter" data-level="8.2" data-path="distributions.html"><a href="distributions.html#estudo-de-caso-descrevendo-a-altura-dos-alunos"><i class="fa fa-check"></i><b>8.2</b> Estudo de caso: descrevendo a altura dos alunos</a></li>
<li class="chapter" data-level="8.3" data-path="distributions.html"><a href="distributions.html#função-de-distribuição"><i class="fa fa-check"></i><b>8.3</b> Função de distribuição</a></li>
<li class="chapter" data-level="8.4" data-path="distributions.html"><a href="distributions.html#cdf-intro"><i class="fa fa-check"></i><b>8.4</b> Funções de distribuição acumulada</a></li>
<li class="chapter" data-level="8.5" data-path="distributions.html"><a href="distributions.html#histogramas"><i class="fa fa-check"></i><b>8.5</b> Histogramas</a></li>
<li class="chapter" data-level="8.6" data-path="distributions.html"><a href="distributions.html#curvas-de-densidade"><i class="fa fa-check"></i><b>8.6</b> Curvas de densidade</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="distributions.html"><a href="distributions.html#interpretando-o-eixo-y"><i class="fa fa-check"></i><b>8.6.1</b> Interpretando o eixo y</a></li>
<li class="chapter" data-level="8.6.2" data-path="distributions.html"><a href="distributions.html#densidades-permitem-a-estratificação"><i class="fa fa-check"></i><b>8.6.2</b> Densidades permitem a estratificação</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="distributions.html"><a href="distributions.html#exercícios-16"><i class="fa fa-check"></i><b>8.7</b> Exercícios</a></li>
<li class="chapter" data-level="8.8" data-path="distributions.html"><a href="distributions.html#normal-distribution"><i class="fa fa-check"></i><b>8.8</b> Distribuição normal</a></li>
<li class="chapter" data-level="8.9" data-path="distributions.html"><a href="distributions.html#unidades-padrão"><i class="fa fa-check"></i><b>8.9</b> Unidades padrão</a></li>
<li class="chapter" data-level="8.10" data-path="distributions.html"><a href="distributions.html#gráficos-qq"><i class="fa fa-check"></i><b>8.10</b> Gráficos QQ</a></li>
<li class="chapter" data-level="8.11" data-path="distributions.html"><a href="distributions.html#percentis"><i class="fa fa-check"></i><b>8.11</b> Percentis</a></li>
<li class="chapter" data-level="8.12" data-path="distributions.html"><a href="distributions.html#diagramas-de-caixas-boxplots"><i class="fa fa-check"></i><b>8.12</b> Diagramas de caixas (<em>boxplots</em>)</a></li>
<li class="chapter" data-level="8.13" data-path="distributions.html"><a href="distributions.html#stratification"><i class="fa fa-check"></i><b>8.13</b> Estratificação</a></li>
<li class="chapter" data-level="8.14" data-path="distributions.html"><a href="distributions.html#student-height-cont"><i class="fa fa-check"></i><b>8.14</b> Estudo de caso: descrevendo as alturas dos alunos (continuação)</a></li>
<li class="chapter" data-level="8.15" data-path="distributions.html"><a href="distributions.html#exercícios-17"><i class="fa fa-check"></i><b>8.15</b> Exercícios</a></li>
<li class="chapter" data-level="8.16" data-path="distributions.html"><a href="distributions.html#other-geometries"><i class="fa fa-check"></i><b>8.16</b> Geometrias ggplot2</a>
<ul>
<li class="chapter" data-level="8.16.1" data-path="distributions.html"><a href="distributions.html#gráficos-de-barra"><i class="fa fa-check"></i><b>8.16.1</b> Gráficos de barra</a></li>
<li class="chapter" data-level="8.16.2" data-path="distributions.html"><a href="distributions.html#histogramas-1"><i class="fa fa-check"></i><b>8.16.2</b> Histogramas</a></li>
<li class="chapter" data-level="8.16.3" data-path="distributions.html"><a href="distributions.html#gráficos-de-densidade"><i class="fa fa-check"></i><b>8.16.3</b> Gráficos de densidade</a></li>
<li class="chapter" data-level="8.16.4" data-path="distributions.html"><a href="distributions.html#boxplots"><i class="fa fa-check"></i><b>8.16.4</b> <em>Boxplots</em></a></li>
<li class="chapter" data-level="8.16.5" data-path="distributions.html"><a href="distributions.html#gráficos-qq-1"><i class="fa fa-check"></i><b>8.16.5</b> Gráficos QQ</a></li>
<li class="chapter" data-level="8.16.6" data-path="distributions.html"><a href="distributions.html#imagens"><i class="fa fa-check"></i><b>8.16.6</b> Imagens</a></li>
<li class="chapter" data-level="8.16.7" data-path="distributions.html"><a href="distributions.html#gráficos-rápidos"><i class="fa fa-check"></i><b>8.16.7</b> Gráficos rápidos</a></li>
</ul></li>
<li class="chapter" data-level="8.17" data-path="distributions.html"><a href="distributions.html#exercícios-18"><i class="fa fa-check"></i><b>8.17</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>9</b> Visualização de dados na prática</a>
<ul>
<li class="chapter" data-level="9.1" data-path="gapminder.html"><a href="gapminder.html#estudo-de-caso-novas-perspectivas-sobre-pobreza"><i class="fa fa-check"></i><b>9.1</b> Estudo de caso: novas perspectivas sobre pobreza</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="gapminder.html"><a href="gapminder.html#teste-de-hans-rosling"><i class="fa fa-check"></i><b>9.1.1</b> Teste de Hans Rosling</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="gapminder.html"><a href="gapminder.html#diagramas-de-dispersão-scatterplots"><i class="fa fa-check"></i><b>9.2</b> Diagramas de dispersão (<em>scatterplots</em>)</a></li>
<li class="chapter" data-level="9.3" data-path="gapminder.html"><a href="gapminder.html#separe-em-facetas"><i class="fa fa-check"></i><b>9.3</b> Separe em facetas</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="gapminder.html"><a href="gapminder.html#facet_wrap"><i class="fa fa-check"></i><b>9.3.1</b> <code>facet_wrap</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="gapminder.html"><a href="gapminder.html#escalas-fixas-para-melhores-comparações"><i class="fa fa-check"></i><b>9.3.2</b> Escalas fixas para melhores comparações</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="gapminder.html"><a href="gapminder.html#gráficos-de-séries-temporais"><i class="fa fa-check"></i><b>9.4</b> Gráficos de séries temporais</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="gapminder.html"><a href="gapminder.html#rótulos-em-vez-de-legendas"><i class="fa fa-check"></i><b>9.4.1</b> Rótulos em vez de legendas</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="gapminder.html"><a href="gapminder.html#transformações-de-dados"><i class="fa fa-check"></i><b>9.5</b> Transformações de dados</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="gapminder.html"><a href="gapminder.html#transformação-logarítmica"><i class="fa fa-check"></i><b>9.5.1</b> Transformação logarítmica</a></li>
<li class="chapter" data-level="9.5.2" data-path="gapminder.html"><a href="gapminder.html#qual-base"><i class="fa fa-check"></i><b>9.5.2</b> Qual base?</a></li>
<li class="chapter" data-level="9.5.3" data-path="gapminder.html"><a href="gapminder.html#transformar-os-valores-ou-a-escala"><i class="fa fa-check"></i><b>9.5.3</b> Transformar os valores ou a escala?</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="gapminder.html"><a href="gapminder.html#como-visualizar-distribuições-multimodais"><i class="fa fa-check"></i><b>9.6</b> Como visualizar distribuições multimodais</a></li>
<li class="chapter" data-level="9.7" data-path="gapminder.html"><a href="gapminder.html#como-comparar-múltiplas-distribuições-com-boxplots-e-gráficos-ridge"><i class="fa fa-check"></i><b>9.7</b> Como comparar múltiplas distribuições com <em>boxplots</em> e gráficos <em>ridge</em></a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="gapminder.html"><a href="gapminder.html#boxplots-diagramas-de-caixa"><i class="fa fa-check"></i><b>9.7.1</b> <em>Boxplots</em> (diagramas de caixa)</a></li>
<li class="chapter" data-level="9.7.2" data-path="gapminder.html"><a href="gapminder.html#gráficos-ridge"><i class="fa fa-check"></i><b>9.7.2</b> Gráficos <em>ridge</em></a></li>
<li class="chapter" data-level="9.7.3" data-path="gapminder.html"><a href="gapminder.html#exemplo-distribuições-de-renda-1970-versus-2010"><i class="fa fa-check"></i><b>9.7.3</b> Exemplo: distribuições de renda 1970 versus 2010</a></li>
<li class="chapter" data-level="9.7.4" data-path="gapminder.html"><a href="gapminder.html#como-acessar-variáveis-calculadas"><i class="fa fa-check"></i><b>9.7.4</b> Como acessar variáveis calculadas</a></li>
<li class="chapter" data-level="9.7.5" data-path="gapminder.html"><a href="gapminder.html#densidades-ponderadas"><i class="fa fa-check"></i><b>9.7.5</b> Densidades ponderadas</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="gapminder.html"><a href="gapminder.html#a-falácia-ecológica-e-a-importância-de-mostrar-os-dados"><i class="fa fa-check"></i><b>9.8</b> A falácia ecológica e a importância de mostrar os dados</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="gapminder.html"><a href="gapminder.html#logit"><i class="fa fa-check"></i><b>9.8.1</b> Transformação logística</a></li>
<li class="chapter" data-level="9.8.2" data-path="gapminder.html"><a href="gapminder.html#mostre-os-dados"><i class="fa fa-check"></i><b>9.8.2</b> Mostre os dados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html"><i class="fa fa-check"></i><b>10</b> Princípios de visualização de dados</a>
<ul>
<li class="chapter" data-level="10.1" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#codificando-dados-usando-dicas-visuais"><i class="fa fa-check"></i><b>10.1</b> Codificando dados usando dicas visuais</a></li>
<li class="chapter" data-level="10.2" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#saiba-quando-incluir-0"><i class="fa fa-check"></i><b>10.2</b> Saiba quando incluir 0</a></li>
<li class="chapter" data-level="10.3" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#não-distorça-quantidades"><i class="fa fa-check"></i><b>10.3</b> Não distorça quantidades</a></li>
<li class="chapter" data-level="10.4" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#ordenando-categorias-por-um-valor-significativo"><i class="fa fa-check"></i><b>10.4</b> Ordenando categorias por um valor significativo</a></li>
<li class="chapter" data-level="10.5" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#mostre-os-dados-1"><i class="fa fa-check"></i><b>10.5</b> Mostre os dados</a></li>
<li class="chapter" data-level="10.6" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#facilite-comparações"><i class="fa fa-check"></i><b>10.6</b> Facilite comparações</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#use-eixos-em-comum"><i class="fa fa-check"></i><b>10.6.1</b> Use eixos em comum</a></li>
<li class="chapter" data-level="10.6.2" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#alinhe-os-gráficos-verticalmente-para-ver-alterações-horizontais-e-horizontalmente-para-ver-alterações-verticais"><i class="fa fa-check"></i><b>10.6.2</b> Alinhe os gráficos verticalmente para ver alterações horizontais e horizontalmente para ver alterações verticais</a></li>
<li class="chapter" data-level="10.6.3" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#considere-transformações"><i class="fa fa-check"></i><b>10.6.3</b> Considere transformações</a></li>
<li class="chapter" data-level="10.6.4" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#as-indicações-visuais-comparadas-devem-ser-adjacentes"><i class="fa fa-check"></i><b>10.6.4</b> As indicações visuais comparadas devem ser adjacentes</a></li>
<li class="chapter" data-level="10.6.5" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#use-cores"><i class="fa fa-check"></i><b>10.6.5</b> Use cores</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#pense-no-daltônico"><i class="fa fa-check"></i><b>10.7</b> Pense no daltônico</a></li>
<li class="chapter" data-level="10.8" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#plotagens-para-duas-variáveis"><i class="fa fa-check"></i><b>10.8</b> Plotagens para duas variáveis</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#gráficos-de-inclinação"><i class="fa fa-check"></i><b>10.8.1</b> Gráficos de inclinação</a></li>
<li class="chapter" data-level="10.8.2" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#gráfico-de-bland-altman"><i class="fa fa-check"></i><b>10.8.2</b> Gráfico de Bland-Altman</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#codificando-uma-terceira-variável"><i class="fa fa-check"></i><b>10.9</b> Codificando uma terceira variável</a></li>
<li class="chapter" data-level="10.10" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#evite-gráficos-pseudo-tridimensionais"><i class="fa fa-check"></i><b>10.10</b> Evite gráficos pseudo-tridimensionais</a></li>
<li class="chapter" data-level="10.11" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#evite-muitos-dígitos-significativos"><i class="fa fa-check"></i><b>10.11</b> Evite muitos dígitos significativos</a></li>
<li class="chapter" data-level="10.12" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#conheça-seu-público"><i class="fa fa-check"></i><b>10.12</b> Conheça seu público</a></li>
<li class="chapter" data-level="10.13" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#exercícios-19"><i class="fa fa-check"></i><b>10.13</b> Exercícios</a></li>
<li class="chapter" data-level="10.14" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#vaccines"><i class="fa fa-check"></i><b>10.14</b> Estudo de caso: vacinas e doenças infecciosas</a></li>
<li class="chapter" data-level="10.15" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#exercícios-20"><i class="fa fa-check"></i><b>10.15</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="robust-summaries.html"><a href="robust-summaries.html"><i class="fa fa-check"></i><b>11</b> Resumos robustos</a>
<ul>
<li class="chapter" data-level="11.1" data-path="robust-summaries.html"><a href="robust-summaries.html#valores-atípicos"><i class="fa fa-check"></i><b>11.1</b> Valores atípicos</a></li>
<li class="chapter" data-level="11.2" data-path="robust-summaries.html"><a href="robust-summaries.html#mediana"><i class="fa fa-check"></i><b>11.2</b> Mediana</a></li>
<li class="chapter" data-level="11.3" data-path="robust-summaries.html"><a href="robust-summaries.html#o-intervalo-interquartil-iqr"><i class="fa fa-check"></i><b>11.3</b> O intervalo interquartil (IQR)</a></li>
<li class="chapter" data-level="11.4" data-path="robust-summaries.html"><a href="robust-summaries.html#definição-de-tukey-de-um-outlier"><i class="fa fa-check"></i><b>11.4</b> Definição de Tukey de um outlier</a></li>
<li class="chapter" data-level="11.5" data-path="robust-summaries.html"><a href="robust-summaries.html#desvio-absoluto-mediano"><i class="fa fa-check"></i><b>11.5</b> Desvio absoluto mediano</a></li>
<li class="chapter" data-level="11.6" data-path="robust-summaries.html"><a href="robust-summaries.html#exercícios-21"><i class="fa fa-check"></i><b>11.6</b> Exercícios</a></li>
<li class="chapter" data-level="11.7" data-path="robust-summaries.html"><a href="robust-summaries.html#estudo-de-caso-altura-do-aluno-autorreferida"><i class="fa fa-check"></i><b>11.7</b> Estudo de caso: altura do aluno autorreferida</a></li>
</ul></li>
<li class="part"><span><b>III Estatísticas com R</b></span></li>
<li class="chapter" data-level="12" data-path="introdução-à-estatística-com-r.html"><a href="introdução-à-estatística-com-r.html"><i class="fa fa-check"></i><b>12</b> Introdução à estatística com R</a></li>
<li class="chapter" data-level="13" data-path="probabilidade.html"><a href="probabilidade.html"><i class="fa fa-check"></i><b>13</b> Probabilidade</a>
<ul>
<li class="chapter" data-level="13.1" data-path="probabilidade.html"><a href="probabilidade.html#probabilidade-discreta"><i class="fa fa-check"></i><b>13.1</b> Probabilidade discreta</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="probabilidade.html"><a href="probabilidade.html#frequência-relativa"><i class="fa fa-check"></i><b>13.1.1</b> Frequência relativa</a></li>
<li class="chapter" data-level="13.1.2" data-path="probabilidade.html"><a href="probabilidade.html#notação"><i class="fa fa-check"></i><b>13.1.2</b> Notação</a></li>
<li class="chapter" data-level="13.1.3" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-de-probabilidade"><i class="fa fa-check"></i><b>13.1.3</b> Distribuições de probabilidade</a></li>
<li class="chapter" data-level="13.1.4" data-path="probabilidade.html"><a href="probabilidade.html#defina-a-semente-aleatória"><i class="fa fa-check"></i><b>13.1.4</b> Defina a semente aleatória</a></li>
<li class="chapter" data-level="13.1.5" data-path="probabilidade.html"><a href="probabilidade.html#com-e-sem-substituição"><i class="fa fa-check"></i><b>13.1.5</b> Com e sem substituição</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="probabilidade.html"><a href="probabilidade.html#independência"><i class="fa fa-check"></i><b>13.2</b> Independência</a></li>
<li class="chapter" data-level="13.3" data-path="probabilidade.html"><a href="probabilidade.html#probabilidades-condicionais"><i class="fa fa-check"></i><b>13.3</b> Probabilidades condicionais</a></li>
<li class="chapter" data-level="13.4" data-path="probabilidade.html"><a href="probabilidade.html#regras-de-adição-e-multiplicação"><i class="fa fa-check"></i><b>13.4</b> Regras de adição e multiplicação</a></li>
<li class="chapter" data-level="13.5" data-path="probabilidade.html"><a href="probabilidade.html#combinações-e-permutações"><i class="fa fa-check"></i><b>13.5</b> Combinações e permutações</a></li>
<li class="chapter" data-level="13.6" data-path="probabilidade.html"><a href="probabilidade.html#exemplos"><i class="fa fa-check"></i><b>13.6</b> Exemplos</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="probabilidade.html"><a href="probabilidade.html#problema-de-aniversário"><i class="fa fa-check"></i><b>13.6.1</b> Problema de aniversário</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="probabilidade.html"><a href="probabilidade.html#exercícios-22"><i class="fa fa-check"></i><b>13.7</b> Exercícios</a></li>
<li class="chapter" data-level="13.8" data-path="probabilidade.html"><a href="probabilidade.html#probabilidade-contínua"><i class="fa fa-check"></i><b>13.8</b> Probabilidade contínua</a></li>
<li class="chapter" data-level="13.9" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-teóricas-contínuas"><i class="fa fa-check"></i><b>13.9</b> Distribuições teóricas contínuas</a>
<ul>
<li class="chapter" data-level="13.9.1" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-teóricas-como-aproximações"><i class="fa fa-check"></i><b>13.9.1</b> Distribuições teóricas como aproximações</a></li>
<li class="chapter" data-level="13.9.2" data-path="probabilidade.html"><a href="probabilidade.html#a-densidade-de-probabilidade"><i class="fa fa-check"></i><b>13.9.2</b> A densidade de probabilidade</a></li>
</ul></li>
<li class="chapter" data-level="13.10" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-contínuas"><i class="fa fa-check"></i><b>13.10</b> Distribuições contínuas</a></li>
<li class="chapter" data-level="13.11" data-path="probabilidade.html"><a href="probabilidade.html#exercícios-23"><i class="fa fa-check"></i><b>13.11</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html"><i class="fa fa-check"></i><b>14</b> Variáveis aleatórias</a>
<ul>
<li class="chapter" data-level="14.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#variáveis-aleatórias-1"><i class="fa fa-check"></i><b>14.1</b> Variáveis aleatórias</a></li>
<li class="chapter" data-level="14.2" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#modelos-de-amostragem"><i class="fa fa-check"></i><b>14.2</b> Modelos de amostragem</a></li>
<li class="chapter" data-level="14.3" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#a-distribuição-de-probabilidade-de-uma-variável-aleatória"><i class="fa fa-check"></i><b>14.3</b> A distribuição de probabilidade de uma variável aleatória</a></li>
<li class="chapter" data-level="14.4" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#distribuições-versus-distribuições-de-probabilidade"><i class="fa fa-check"></i><b>14.4</b> Distribuições versus distribuições de probabilidade</a></li>
<li class="chapter" data-level="14.5" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#notação-para-variáveis-aleatórias"><i class="fa fa-check"></i><b>14.5</b> Notação para variáveis aleatórias</a></li>
<li class="chapter" data-level="14.6" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#o-valor-esperado-e-o-erro-padrão"><i class="fa fa-check"></i><b>14.6</b> O valor esperado e o erro padrão</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#desvio-padrão-da-população-versus-desvio-padrão-da-amostra"><i class="fa fa-check"></i><b>14.6.1</b> Desvio padrão da população versus desvio padrão da amostra</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#teorema-do-limite-central"><i class="fa fa-check"></i><b>14.7</b> Teorema do Limite Central</a></li>
<li class="chapter" data-level="14.8" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#propriedades-estatísticas-das-médias"><i class="fa fa-check"></i><b>14.8</b> Propriedades estatísticas das médias</a></li>
<li class="chapter" data-level="14.9" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#lei-dos-grandes-números"><i class="fa fa-check"></i><b>14.9</b> Lei dos grandes números</a>
<ul>
<li class="chapter" data-level="14.9.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#interpretação-incorreta-da-lei-das-médias"><i class="fa fa-check"></i><b>14.9.1</b> Interpretação incorreta da lei das médias</a></li>
</ul></li>
<li class="chapter" data-level="14.10" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#exercícios-24"><i class="fa fa-check"></i><b>14.10</b> Exercícios</a></li>
<li class="chapter" data-level="14.11" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#estudo-de-caso-the-big-short"><i class="fa fa-check"></i><b>14.11</b> Estudo de caso: <em>The Big Short</em></a>
<ul>
<li class="chapter" data-level="14.11.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#taxas-de-juros-explicadas-com-modelo-de-probabilidade"><i class="fa fa-check"></i><b>14.11.1</b> Taxas de juros explicadas com modelo de probabilidade</a></li>
<li class="chapter" data-level="14.11.2" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#the-big-short"><i class="fa fa-check"></i><b>14.11.2</b> <em>The Big Short</em></a></li>
</ul></li>
<li class="chapter" data-level="14.12" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#exercícios-25"><i class="fa fa-check"></i><b>14.12</b> Exercícios</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado com bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução à Ciência de Dados</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="variáveis-aleatórias" class="section level1" number="14">
<h1><span class="header-section-number">Capítulo 14</span> Variáveis aleatórias</h1>
<p>Na ciência de dados, geralmente trabalhamos com dados que são afetados de alguma forma pelo acaso. Alguns exemplos são dados provenientes de uma amostra aleatória, dados afetados por um erro de medição ou dados que medem algum resultado de natureza aleatória. Ser capaz de quantificar a incerteza introduzida pela aleatoriedade é um dos trabalhos mais importantes dos analistas de dados. A inferência estatística oferece uma estrutura para fazer isso, assim como diversas outras ferramentas práticas. O primeiro passo é aprender a como descrever matematicamente variáveis aleatórias.</p>
<p>Neste capítulo, apresentamos variáveis aleatórias (<em>random variables</em>) e suas propriedades, começando com sua aplicação em jogos de azar. Em seguida, descrevemos alguns dos eventos relacionados à crise financeira de 2007-2008<a href="#fn51" class="footnote-ref" id="fnref51"><sup>51</sup></a> usando a teoria da probabilidade. Essa crise financeira foi causada em parte pela subestimação do risco de certos títulos vendidos por instituições financeiras. Especificamente, os riscos de títulos hipotecários e as obrigações de dívidas com garantias foram amplamente subestimados. Esses ativos foram vendidos a preços que presumiam que a maioria dos proprietários pagaria pontualmente, e a probabilidade de que isso não ocorresse foi calculada como baixa. Uma combinação de fatores resultou em muito mais inadimplências do que o esperado, levando a uma queda nos preços desses títulos. Como consequência, bancos perderam tanto dinheiro que precisaram de ajuda do governo americano para evitar o fechamento completo.</p>
<div id="variáveis-aleatórias-1" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Variáveis aleatórias</h2>
<p>Variáveis aleatórias são os resultados numéricos de processos aleatórios. Podemos facilmente gerar variáveis aleatórias usando alguns dos simples exemplos que mostramos anteriormente. Por exemplo, vamos definir <code>X</code> igual a 1 se uma bola for azul ou igual a 0 caso seja vermelha:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="variáveis-aleatórias.html#cb497-1" aria-hidden="true" tabindex="-1"></a>bolas <span class="ot">&lt;-</span> <span class="fu">rep</span>( <span class="fu">c</span>(<span class="st">&quot;vermelho&quot;</span>, <span class="st">&quot;azul&quot;</span>), <span class="at">times =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb497-2"><a href="variáveis-aleatórias.html#cb497-2" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">sample</span>(bolas, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&quot;azul&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<p>Aqui <code>X</code> é uma variável aleatória: toda vez que selecionamos uma nova bola, o resultado muda aleatoriamente. Veja abaixo:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="variáveis-aleatórias.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="fu">sample</span>(bolas, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&quot;azul&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb498-2"><a href="variáveis-aleatórias.html#cb498-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb498-3"><a href="variáveis-aleatórias.html#cb498-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="fu">sample</span>(bolas, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&quot;azul&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb498-4"><a href="variáveis-aleatórias.html#cb498-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb498-5"><a href="variáveis-aleatórias.html#cb498-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="fu">sample</span>(bolas, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&quot;azul&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb498-6"><a href="variáveis-aleatórias.html#cb498-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Às vezes é 1 e às vezes é 0.</p>
</div>
<div id="modelos-de-amostragem" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Modelos de amostragem</h2>
<p>Muitos procedimentos de geração de dados, aqueles que produzem os dados que estudamos, podem ser modelados relativamente bem como se estivéssemos sorteando de olhos vendados elementos em uma urna. Por exemplo, podemos modelar os votos de eleitores americanos como 0s (para eleitores do partido republicano) e 1s (para eleietores do partido democrata) em uma urna que contém os códigos 0 e 1 para todos os prováveis eleitores. Em estudos epidemiológicos, geralmente assumimos que os sujeitos de nosso estudo são uma amostra aleatória da população de interesse. Os dados relacionados a um resultado específico podem ser modelados como uma amostra aleatória de uma urna contendo o resultado para toda a população de interesse. Da mesma forma, na pesquisa experimental, geralmente assumimos que os organismos individuais que estamos estudando, como por exemplo, vermes, moscas ou ratos, são uma amostra aleatória de uma população maior. Experimentos aleatórios também podem ser modelados como o sorteio de uma urna, considerando a maneira como os indivíduos são designados para grupos: quando designados, o grupo é escolhido aleatoriamente. Os modelos de amostragem são, portanto, onipresentes na ciência de dados. Jogos de cassino oferecem uma infinidade de exemplos de situações do mundo real em que modelos de amostragem são usados para responder a perguntas específicas. Portanto, começaremos com esses exemplos.</p>
<p>Suponha que um cassino muito pequeno o contrate para ver se eles devem incluir jogos de roleta. Para simplificar o exemplo, assumiremos que 1.000 pessoas jogarão e que o único tipo de aposta que podem fazer na roleta é apostar em vermelho ou preto. O cassino quer que você preveja quanto dinheiro ganharão ou perderão. Eles querem uma gama de valores e, em particular, querem saber qual é a probabilidade de perderem dinheiro. Se essa probabilidade for muito alta, eles não instalarão jogos de roleta.</p>
<p>Vamos definir uma variável aleatória <span class="math inline">\(S\)</span> que irá representar o total de ganhos do cassino. Vamos começar construindo a urna. Uma roleta tem 18 posições vermelhas, 18 posições pretas e duas verdes. Portanto, jogar uma cor em um jogo de roleta é equivalente a escolher desta urna:</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="variáveis-aleatórias.html#cb499-1" aria-hidden="true" tabindex="-1"></a>color <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Preto&quot;</span>, <span class="st">&quot;Vermelho&quot;</span>, <span class="st">&quot;Verde&quot;</span>), <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">18</span>, <span class="dv">2</span>))</span></code></pre></div>
<p>Os 1.000 resultados de 1.000 pessoas jogando são eventos independentes desta urna. Se o jogador apostar no vermelho e o resultado for vermelho, o jogador ganha e o cassino perde um dólar, então obtemos -$1. Por outro lado, se o jogador apostar no vermelho e o resultado for preto, o casino ganha um dólar e obtemos $1. Para construir nossa variável aleatória <span class="math inline">\(S\)</span>, podemos usar este código:</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="variáveis-aleatórias.html#cb500-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb500-2"><a href="variáveis-aleatórias.html#cb500-2" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">ifelse</span>(color <span class="sc">==</span> <span class="st">&quot;Vermelho&quot;</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb500-3"><a href="variáveis-aleatórias.html#cb500-3" aria-hidden="true" tabindex="-1"></a>X[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb500-4"><a href="variáveis-aleatórias.html#cb500-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] -1  1  1 -1 -1 -1  1  1  1  1</span></span></code></pre></div>
<p>Como sabemos as proporções de 1s e -1s, podemos simular os resultados da roleta com uma linha de código, sem a necessidade de definir a cor (<code>color</code>):</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="variáveis-aleatórias.html#cb501-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>), n, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="dv">9</span><span class="sc">/</span><span class="dv">19</span>, <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>))</span></code></pre></div>
<p>Chamamos isso de <strong>modelo de amostragem</strong>, pois estamos modelando o comportamento aleatório da roleta com a amostragem das opções disponíveis. O ganho total de <span class="math inline">\(S\)</span> é simplesmente a soma desses 1.000 eventos independentes:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="variáveis-aleatórias.html#cb502-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>), n, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="dv">9</span><span class="sc">/</span><span class="dv">19</span>, <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>))</span>
<span id="cb502-2"><a href="variáveis-aleatórias.html#cb502-2" aria-hidden="true" tabindex="-1"></a>S <span class="ot">&lt;-</span> <span class="fu">sum</span>(X)</span>
<span id="cb502-3"><a href="variáveis-aleatórias.html#cb502-3" aria-hidden="true" tabindex="-1"></a>S</span>
<span id="cb502-4"><a href="variáveis-aleatórias.html#cb502-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 22</span></span></code></pre></div>
</div>
<div id="a-distribuição-de-probabilidade-de-uma-variável-aleatória" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> A distribuição de probabilidade de uma variável aleatória</h2>
<p>Se você executar o código acima, verá que <span class="math inline">\(S\)</span> muda sempre. Isto é porque <span class="math inline">\(S\)</span> é uma <strong>variável aleatória</strong>. A distribuição de probabilidade de uma variável aleatória nos diz a probabilidade de que o valor observado caia em um determinado intervalo. Por exemplo, se queremos saber a probabilidade de perdermos dinheiro, estamos perguntando a probabilidade de que <span class="math inline">\(S\)</span> estar no intervalo <span class="math inline">\(S&lt;0\)</span>.</p>
<p>Observe que se pudermos definir uma função de distribuição cumulativa <span class="math inline">\(F(a) = \mbox{Pr}(S\leq a)\)</span>, então podemos responder a qualquer pergunta relacionada à probabilidade de eventos definidos por nossa variável aleatória <span class="math inline">\(S\)</span>, incluindo o evento <span class="math inline">\(S&lt;0\)</span>. Chamamos isso de <em>função de distribuição</em> da variável aleatória.</p>
<p>Podemos estimar a função de distribuição de uma variável aleatória <span class="math inline">\(S\)</span> usando a simulação de Monte Carlo para gerar multiplas repetições de uma variável randômica. No código a seguir, realizamos o experimento de ter 1.000 pessoas jogando roleta <span class="math inline">\(B\)</span> vezes, especificamente <span class="math inline">\(B = 10.000\)</span> vezes neste exemplo:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="variáveis-aleatórias.html#cb503-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb503-2"><a href="variáveis-aleatórias.html#cb503-2" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb503-3"><a href="variáveis-aleatórias.html#cb503-3" aria-hidden="true" tabindex="-1"></a>roulette_winnings <span class="ot">&lt;-</span> <span class="cf">function</span>(n){</span>
<span id="cb503-4"><a href="variáveis-aleatórias.html#cb503-4" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>), n, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="dv">9</span><span class="sc">/</span><span class="dv">19</span>, <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>))</span>
<span id="cb503-5"><a href="variáveis-aleatórias.html#cb503-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(X)</span>
<span id="cb503-6"><a href="variáveis-aleatórias.html#cb503-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb503-7"><a href="variáveis-aleatórias.html#cb503-7" aria-hidden="true" tabindex="-1"></a>S <span class="ot">&lt;-</span> <span class="fu">replicate</span>(B, <span class="fu">roulette_winnings</span>(n))</span></code></pre></div>
<p>Agora podemos perguntar o seguinte: em nossas simulações, com que frequência recebemos somas inferiores ou iguais a <code>a</code>?</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="variáveis-aleatórias.html#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(S <span class="sc">&lt;=</span> a)</span></code></pre></div>
<p>Essa será uma aproximação muito boa de <span class="math inline">\(F(a)\)</span>. Podemos facilmente responder à pergunta do cassino: qual a probabilidade de perdermos dinheiro? Podemos ver que a probabilidade é bastante baixa:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="variáveis-aleatórias.html#cb505-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(S<span class="sc">&lt;</span><span class="dv">0</span>)</span>
<span id="cb505-2"><a href="variáveis-aleatórias.html#cb505-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0456</span></span></code></pre></div>
<p>Podemos visualizar a distribuição de <span class="math inline">\(S\)</span> criando um histograma mostrando a probabilidade <span class="math inline">\(F(b)-F(a)\)</span> para vários intervalos <span class="math inline">\((a,b]\)</span>:</p>
<p><img src="livro_files/figure-html/normal-approximates-distribution-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Vemos que a distribuição parece ser aproximadamente normal. Um gráfico QQ confirmará que a aproximação normal está próxima de uma aproximação perfeita para essa distribuição. De fato, se a distribuição é normal, tudo o que precisamos para definir a distribuição é a média e o desvio padrão. Como temos os valores originais dos quais a distribuição é criada, podemos facilmente calculá-los usando <code>mean(S)</code> e <code>sd(S)</code>. A curva azul adicionada ao histograma acima representa uma densidade normal com essa média e desvio padrão.</p>
<p>Nesse caso, a média e o desvio padrão têm nomes especiais. Eles são conhecidos como valor esperado (<em>expected value</em>) e erro padrão (<em>standard error</em>) da variável aleatória <span class="math inline">\(S\)</span>. Discutiremos mais sobre isso na próxima seção.</p>
<p>A teoria estatística fornece uma maneira de derivar a distribuição de variáveis aleatórias definidas como extrações aleatórias independentes de uma urna. Especificamente, em nosso exemplo anterior, podemos mostrar que <span class="math inline">\((S+n)/2\)</span> segue uma distribuição binomial. Portanto, não precisamos executar simulações de Monte Carlo para conhecer a distribuição de probabilidade de <span class="math inline">\(S\)</span>. Fizemos isso para fins ilustrativos.</p>
<p>Podemos usar as funções <code>dbinom</code> e <code>pbinom</code> para calcular as probabilidades exatamente. Por exemplo, para calcular <span class="math inline">\(\mbox{Pr}(S &lt; 0)\)</span> nós notamos que:</p>
<p><span class="math display">\[\mbox{Pr}(S &lt; 0) = \mbox{Pr}((S+n)/2 &lt; (0+n)/2)\]</span></p>
<p>e podemos usar <code>pbinom</code> calcular:</p>
<p><span class="math display">\[\mbox {Pr}(S \leq 0) \]</span></p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="variáveis-aleatórias.html#cb506-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb506-2"><a href="variáveis-aleatórias.html#cb506-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pbinom</span>(n<span class="sc">/</span><span class="dv">2</span>, <span class="at">size =</span> n, <span class="at">prob =</span> <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>)</span>
<span id="cb506-3"><a href="variáveis-aleatórias.html#cb506-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0511</span></span></code></pre></div>
<p>Por se tratar de uma função de probabilidade discreta, para obter <span class="math inline">\(\mbox{Pr}(S &lt; 0)\)</span> ao invés de <span class="math inline">\(\mbox{Pr}(S \leq 0)\)</span>, nós escrevemos:</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="variáveis-aleatórias.html#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pbinom</span>(n<span class="sc">/</span><span class="dv">2-1</span>, <span class="at">size =</span> n, <span class="at">prob =</span> <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>)</span>
<span id="cb507-2"><a href="variáveis-aleatórias.html#cb507-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0448</span></span></code></pre></div>
<p>Para mais detalhes sobre a distribuição binomial, você pode consultar qualquer livro de probabilidades básico ou mesmo a Wikipedia<a href="#fn52" class="footnote-ref" id="fnref52"><sup>52</sup></a>.</p>
<p>Aqui, nós não iremos cobrir esses detalhes. Em vez disso, discutiremos uma abordagem incrivelmente útil fornecida pela teoria matemática que se aplica geralmente a somas e calcula as médias de qualquer caixa de votação: o Teorema do Limite Central.</p>
</div>
<div id="distribuições-versus-distribuições-de-probabilidade" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Distribuições versus distribuições de probabilidade</h2>
<p>Antes de continuar, vamos fazer uma distinção e uma conexão importante entre a distribuição de uma lista de números e uma distribuição de probabilidade. No capítulo de visualização, descrevemos como qualquer lista de números <span class="math inline">\(x_1,\dots,x_n\)</span> tem uma distribuição. A definição é bastante direta. Definimos <span class="math inline">\(F(a)\)</span> como a função que nos diz que proporção da lista é menor ou igual a <span class="math inline">\(a\)</span>. Como são resumos úteis quando a distribuição é aproximadamente normal, definimos a média e o desvio padrão. Eles são definidos com uma operação simples do vetor que contém a lista de números <code>x</code>:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="variáveis-aleatórias.html#cb508-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">sum</span>(x)<span class="sc">/</span><span class="fu">length</span>(x)</span>
<span id="cb508-2"><a href="variáveis-aleatórias.html#cb508-2" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>((x <span class="sc">-</span> m)<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span> <span class="fu">length</span>(x))</span></code></pre></div>
<p>Uma variável aleatória <span class="math inline">\(X\)</span> tem uma função de distribuição. Para definir isso, não precisamos de uma lista de números. É um conceito teórico. Nesse caso, definimos a distribuição como o <span class="math inline">\(F(a)\)</span> respondendo à pergunta: qual é a probabilidade de <span class="math inline">\(X\)</span> ser menor ou igual a <span class="math inline">\(a\)</span>? Não há lista de números.</p>
<p>No entanto, se <span class="math inline">\(X\)</span> é definido como uma seleção de uma urna com números, então há uma lista: a lista de números dentro da urna. Nesse caso, a distribuição dessa lista é a distribuição de probabilidade de <span class="math inline">\(X\)</span> e a média e o desvio padrão dessa lista são o valor esperado e o erro padrão da variável aleatória.</p>
<p>Outra maneira de pensar sobre isso, que não envolva uma urna, é executar uma simulação de Monte Carlo e gerar uma lista muito grande de resultados de <span class="math inline">\(X\)</span>. Esses resultados são uma lista de números. A distribuição dessa lista será uma aproximação muito boa da distribuição de probabilidade de <span class="math inline">\(X\)</span>. Quanto maior a lista, melhor a aproximação. A média e o desvio padrão dessa lista irão se aproximar do valor esperado e do erro padrão da variável aleatória.</p>
</div>
<div id="notação-para-variáveis-aleatórias" class="section level2" number="14.5">
<h2><span class="header-section-number">14.5</span> Notação para variáveis aleatórias</h2>
<p>Nos livros estatísticos, as letras maiúsculas são usadas para denotar variáveis aleatórias e seguimos essa convenção aqui. Letras minúsculas são usadas para valores observados. Você verá algumas notações que incluem ambos. Por exemplo, verá eventos definidos como <span class="math inline">\(X \leq x\)</span>. Aqui, <span class="math inline">\(X\)</span> é uma variável aleatória, fazendo disso um evento aleatório, e <span class="math inline">\(x\)</span> é um valor arbitrário e não aleatório. Assim, <span class="math inline">\(X\)</span> poderia, por exemplo, representar o número em um dado e <span class="math inline">\(x\)</span> representará um valor real que vemos: 1, 2, 3, 4, 5 ou 6. Portanto, neste caso, a probabilidade de <span class="math inline">\(X=x\)</span> é 1/6 independentemente do valor observado <span class="math inline">\(x\)</span>. Essa notação é um pouco estranha porque, quando fazemos perguntas de probabilidade, <span class="math inline">\(X\)</span> não é uma quantidade observada, mas uma quantidade aleatória que veremos no futuro. Podemos falar sobre o que esperamos que seja, quais valores são prováveis, mas não quais são exatamente. Mas, uma vez que temos os dados, vemos uma realização de <span class="math inline">\(X\)</span>. Portanto, cientistas de dados falam sobre o que poderia ter sido depois de ver o que realmente aconteceu.</p>
</div>
<div id="o-valor-esperado-e-o-erro-padrão" class="section level2" number="14.6">
<h2><span class="header-section-number">14.6</span> O valor esperado e o erro padrão</h2>
<p>Descrevemos anteriormente modelos de amostragem para eventos. Agora, revisaremos a teoria matemática que nos permite aproximar as distribuições de probabilidade para a soma dos eventos. Depois de fazer isso estaremos aptos para ajudar o cassino a prever quanto dinheiro ganharão. A mesma abordagem que usamos para a soma dos eventos será útil para descrever a distribuição das médias e a proporção que precisaremos para entender como as pesquisas funcionam.</p>
<p>O primeiro conceito importante a aprender é o valor esperado. Nos livros de estatística, é comum usar a letra <span class="math inline">\(\mbox{E}\)</span> desta forma:</p>
<p><span class="math display">\[\mbox{E}[X]\]</span></p>
<p>para denotar o valor esperado da variável aleatória <span class="math inline">\(X\)</span>.</p>
<p>Uma variável aleatória irá variar em torno do valor esperado de uma maneira que, se você pegar a média de muitos, muitos eventos, a média dos eventos se aproximará do valor esperado, aproximando-se cada vez mais à medida que os eventos aumentam.</p>
<p>A estatística teórica fornece técnicas que facilitam o cálculo dos valores esperados em diferentes circunstâncias. Por exemplo, uma fórmula útil nos diz que <em>o valor esperado de uma variável aleatória definida por um sorteio é a média dos números na urna</em>. Na urna que usamos para modelar apostas de roleta no vermelho, obtivemos 20 resultados de $1 e 18 resultados de -$1. O valor esperado é então:</p>
<p><span class="math display">\[
\mbox{E}[X] = (20 + -18)/38
\]</span></p>
<p>que é cerca de 5 centavos. É um pouco contra-intuitivo dizer que <span class="math inline">\(X\)</span> varia em torno de 0,05, quando os únicos valores utilizados são 1 e -1. Uma maneira de entender o valor esperado nesse contexto é perceber que, se jogarmos o jogo repetidamente, o cassino ganha, em média, 5 centavos por jogo. Uma simulação de Monte Carlo confirma isso:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="variáveis-aleatórias.html#cb509-1" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span>
<span id="cb509-2"><a href="variáveis-aleatórias.html#cb509-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>), B, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="dv">9</span><span class="sc">/</span><span class="dv">19</span>, <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>))</span>
<span id="cb509-3"><a href="variáveis-aleatórias.html#cb509-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span>
<span id="cb509-4"><a href="variáveis-aleatórias.html#cb509-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0517</span></span></code></pre></div>
<p>Em geral, se a urna tem dois resultados possíveis, digamos <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span> com proporções <span class="math inline">\(p\)</span> e <span class="math inline">\(1-p\)</span>, respectivamente, a média é:</p>
<p><span class="math display">\[\mbox{E}[X] = ap + b(1-p)\]</span></p>
<p>Para ver isso, observe que se houver <span class="math inline">\(n\)</span> bolas na urna, então temos <span class="math inline">\(np\)</span> <span class="math inline">\(a\)</span>s e <span class="math inline">\(n(1-p)\)</span> <span class="math inline">\(b\)</span>s, e como a média é a soma, <span class="math inline">\(n\times a \times p + n\times b \times (1-p)\)</span>, dividido pelo total <span class="math inline">\(n\)</span>, obtemos que a média é <span class="math inline">\(ap + b(1-p)\)</span>.</p>
<p>Agora, a razão pela qual definimos o valor esperado é porque essa definição matemática é útil para aproximar as distribuições de probabilidade da soma, que é útil para descrever a distribuição de médias e proporções. O primeiro fato útil é que <em>o valor esperado da soma dos eventos</em> é:</p>
<p><span class="math display">\[
\mbox{}\mbox{número de eventos } \times \mbox{ média dos números na urna}
\]</span></p>
<p>Portanto, se 1.000 pessoas jogam roleta, o cassino espera ganhar, em média, cerca de 1.000 <span class="math inline">\(\times\)</span> $0,05 = $50. Mas esse é um valor esperado. Quão diferente pode ser uma observação do valor esperado? O cassino realmente precisa saber disso. Qual é o intervalo de probabilidades? Se números negativos forem muito prováveis, eles não instalarão roletas. A teoria estatística mais uma vez responde a essa pergunta. O <em>erro padrão</em> (do inglês <em>standard error</em> ou SE) nos dá uma ideia do tamanho da variação em torno do valor esperado. Nos livros de estatística, é comum usar:</p>
<p><span class="math display">\[\mbox{SE}[X]\]</span></p>
<p>para denotar o erro padrão de uma variável aleatória.</p>
<p><strong>Se nossos eventos são independentes</strong>, o erro padrão da soma é dado pela equação:</p>
<p><span class="math display">\[
\sqrt{\mbox{número de eventos }} \times \mbox{ desvio padrão dos números na urna}
\]</span></p>
<p>Usando a definição de desvio padrão, podemos derivar, com um pouco de matemática, que se uma urna contiver dois valores <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span> com proporções <span class="math inline">\(p\)</span> e <span class="math inline">\((1-p)\)</span>, respectivamente, o desvio padrão é:</p>
<p><span class="math display">\[\mid b - a \mid \sqrt{p(1-p)}.\]</span></p>
<p>Portanto, no nosso exemplo da roleta, o desvio padrão dos valores dentro da urna é: <span class="math inline">\(\mid 1 - (-1) \mid \sqrt{10/19 \times 9/19}\)</span> ou:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="variáveis-aleatórias.html#cb510-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="dv">90</span>)<span class="sc">/</span><span class="dv">19</span></span>
<span id="cb510-2"><a href="variáveis-aleatórias.html#cb510-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.999</span></span></code></pre></div>
<p>O erro padrão nos diz a diferença típica entre uma variável aleatória e sua expectativa. Como um sorteio é obviamente a soma de um único sorteio, podemos usar a fórmula acima para calcular que a variável aleatória definida por um sorteio tem um valor esperado de 0,05 e um erro padrão de aproximadamente 1. Isso faz sentido, já que obtemos 1 ou -1, com 1 levemente favorecido sobre -1.</p>
<p>Usando a fórmula acima, a soma de 1.000 pessoas jogando tem um erro padrão de aproximadamente $32:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="variáveis-aleatórias.html#cb511-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb511-2"><a href="variáveis-aleatórias.html#cb511-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(n) <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="dv">90</span>)<span class="sc">/</span><span class="dv">19</span></span>
<span id="cb511-3"><a href="variáveis-aleatórias.html#cb511-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 31.6</span></span></code></pre></div>
<p>Como resultado, quando 1.000 pessoas apostarem no vermelho, o cassino deverá ganhar $50 com um erro padrão de $32. Portanto, isso aparenta ser uma aposta segura. Mas ainda não respondemos à pergunta: qual a probabilidade de perder dinheiro? Aqui o teorema do limite central nos ajudará.</p>
<p><strong>Nota Avançada</strong>: Antes de continuar, devemos apontar que os cálculos exatos de probabilidade de vitória no cassino podem ser feitos com a distribuição binomial. Entretanto, aqui nos concentramos no teorema do limite central, que geralmente pode ser aplicado a somas de variáveis aleatórias, algo que não pode ser feito com a distribuição binomial.</p>
<div id="desvio-padrão-da-população-versus-desvio-padrão-da-amostra" class="section level3" number="14.6.1">
<h3><span class="header-section-number">14.6.1</span> Desvio padrão da população versus desvio padrão da amostra</h3>
<p>O desvio padrão (do inglês <em>standard deviation</em> ou SD) de uma lista <code>x</code> (usamos as alturas abaixo como exemplo) é definido como a raiz quadrada da média das diferenças quadradas:</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="variáveis-aleatórias.html#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb512-2"><a href="variáveis-aleatórias.html#cb512-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> heights<span class="sc">$</span>height</span>
<span id="cb512-3"><a href="variáveis-aleatórias.html#cb512-3" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)</span>
<span id="cb512-4"><a href="variáveis-aleatórias.html#cb512-4" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((x<span class="sc">-</span>m)<span class="sc">^</span><span class="dv">2</span>))</span></code></pre></div>
<p>Usando notação matemática, escrevemos:</p>
<p><span class="math display">\[
\mu = \frac{1}{n} \sum_{i=1}^n x_i \\
\sigma = \sqrt{\frac{1}{n} \sum_{i=1}^n (x_i - \mu)^2}
\]</span></p>
<p>No entanto, observe que a função <code>sd</code> retorna um resultado ligeiramente diferente:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="variáveis-aleatórias.html#cb513-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(s, <span class="fu">sd</span>(x))</span>
<span id="cb513-2"><a href="variáveis-aleatórias.html#cb513-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb513-3"><a href="variáveis-aleatórias.html#cb513-3" aria-hidden="true" tabindex="-1"></a>s<span class="sc">-</span><span class="fu">sd</span>(x)</span>
<span id="cb513-4"><a href="variáveis-aleatórias.html#cb513-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.00194</span></span></code></pre></div>
<p>Isso ocorre porque a função <code>sd</code> em R não retorna o desvio padrão da lista, mas sim usa uma fórmula que estima desvios padrão da população a partir de uma amostra aleatória <span class="math inline">\(X_1, \dots, X_N\)</span> que, por razões não discutidas aqui, divide a soma dos quadrados por <span class="math inline">\(N-1\)</span>.</p>
<p><span class="math display">\[
\bar{X} = \frac{1}{N} \sum_{i=1}^N X_i, \,\,\,\,
s = \sqrt{\frac{1}{N-1} \sum_{i=1}^N (X_i - \bar{X})^2}
\]</span></p>
<p>Você pode ver que esse é o caso digitando:</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="variáveis-aleatórias.html#cb514-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb514-2"><a href="variáveis-aleatórias.html#cb514-2" aria-hidden="true" tabindex="-1"></a>s<span class="sc">-</span><span class="fu">sd</span>(x)<span class="sc">*</span><span class="fu">sqrt</span>((n<span class="dv">-1</span>)<span class="sc">/</span> n)</span>
<span id="cb514-3"><a href="variáveis-aleatórias.html#cb514-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Para toda a teoria discutida aqui, você precisa calcular o desvio padrão real, conforme definido:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="variáveis-aleatórias.html#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">mean</span>((x<span class="sc">-</span>m)<span class="sc">^</span><span class="dv">2</span>))</span></code></pre></div>
<p>Portanto, tenha cuidado ao usar a função <code>sd</code> no R. No entanto, lembre-se de que, ao longo do livro, às vezes usamos a função <code>sd</code> quando realmente queremos o verdadeiro desvio padrão. Isso ocorre porque quando o tamanho da lista é grande, os valores obtidos pelas duas fórmulas são praticamente equivalentes, pois <span class="math inline">\(\sqrt{(N-1)/N} \approx 1\)</span>.</p>
</div>
</div>
<div id="teorema-do-limite-central" class="section level2" number="14.7">
<h2><span class="header-section-number">14.7</span> Teorema do Limite Central</h2>
<p>O Teorema do Limite Central (TLC) nos diz que quando o número de eventos, também chamado <em>tamanho da amostra</em>, é grande, a distribuição de probabilidade da soma de eventos independentes é aproximadamente normal. Como modelos de amostragem são usados para muitos processos de geração de dados, o TLC é considerado uma das ideias matemáticas mais importantes da história.</p>
<p>Anteriormente, discutimos que, se soubermos que a distribuição de uma lista de números se aproxima da distribuição normal, tudo o que precisamos para descrever a lista é a média e o desvio padrão. Também sabemos que o mesmo se aplica às distribuições de probabilidade. Se uma variável aleatória tem uma distribuição de probabilidade que se aproxima da distribuição normal, tudo o que precisamos para descrever a distribuição de probabilidade é a média e o desvio padrão, referidos como valor esperado e erro padrão.</p>
<p>Anteriormente, executamos esta simulação de Monte Carlo:</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="variáveis-aleatórias.html#cb516-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb516-2"><a href="variáveis-aleatórias.html#cb516-2" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb516-3"><a href="variáveis-aleatórias.html#cb516-3" aria-hidden="true" tabindex="-1"></a>roulette_winnings <span class="ot">&lt;-</span> <span class="cf">function</span>(n){</span>
<span id="cb516-4"><a href="variáveis-aleatórias.html#cb516-4" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>), n, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="dv">9</span><span class="sc">/</span><span class="dv">19</span>, <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>))</span>
<span id="cb516-5"><a href="variáveis-aleatórias.html#cb516-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(X)</span>
<span id="cb516-6"><a href="variáveis-aleatórias.html#cb516-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb516-7"><a href="variáveis-aleatórias.html#cb516-7" aria-hidden="true" tabindex="-1"></a>S <span class="ot">&lt;-</span> <span class="fu">replicate</span>(B, <span class="fu">roulette_winnings</span>(n))</span></code></pre></div>
<p>O Teorema do Limite Central nos diz que a soma <span class="math inline">\(S\)</span> é aproximada por uma distribuição normal. Usando as fórmulas acima, sabemos que o valor esperado e o erro padrão são:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="variáveis-aleatórias.html#cb517-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">*</span> (<span class="dv">20-18</span>)<span class="sc">/</span><span class="dv">38</span></span>
<span id="cb517-2"><a href="variáveis-aleatórias.html#cb517-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 52.6</span></span>
<span id="cb517-3"><a href="variáveis-aleatórias.html#cb517-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(n) <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="dv">90</span>)<span class="sc">/</span><span class="dv">19</span></span>
<span id="cb517-4"><a href="variáveis-aleatórias.html#cb517-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 31.6</span></span></code></pre></div>
<p>Os valores teóricos acima correspondem aos obtidos com a simulação de Monte Carlo:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="variáveis-aleatórias.html#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(S)</span>
<span id="cb518-2"><a href="variáveis-aleatórias.html#cb518-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 52.2</span></span>
<span id="cb518-3"><a href="variáveis-aleatórias.html#cb518-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(S)</span>
<span id="cb518-4"><a href="variáveis-aleatórias.html#cb518-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 31.7</span></span></code></pre></div>
<p>Usando o TLC, podemos pular a simulação de Monte Carlo e, em vez disso, calcular a probabilidade de o cassino perder dinheiro usando esta aproximação:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="variáveis-aleatórias.html#cb519-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> n <span class="sc">*</span> (<span class="dv">20-18</span>)<span class="sc">/</span><span class="dv">38</span></span>
<span id="cb519-2"><a href="variáveis-aleatórias.html#cb519-2" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(n) <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="dv">90</span>)<span class="sc">/</span><span class="dv">19</span></span>
<span id="cb519-3"><a href="variáveis-aleatórias.html#cb519-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pnorm</span>(<span class="dv">0</span>, mu, se)</span>
<span id="cb519-4"><a href="variáveis-aleatórias.html#cb519-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0478</span></span></code></pre></div>
<p>o que também concorda muito bem com o resultado da simulação de Monte Carlo:</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="variáveis-aleatórias.html#cb520-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(S <span class="sc">&lt;</span> <span class="dv">0</span>)</span>
<span id="cb520-2"><a href="variáveis-aleatórias.html#cb520-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0458</span></span></code></pre></div>
<p>Qual é o tamanho do Teorema do Limite Central?</p>
<p>O Teorema do Limite Central funciona quando o número de eventos é amplo. Mas amplo é um termo relativo. Em muitas circunstâncias, apenas 30 eventos são suficientes para que o TLC seja útil. Em alguns casos específicos, apenas 10 eventos são suficientes. No entanto, essas não devem ser consideradas regras gerais. Por exemplo, quando a probabilidade de sucesso é muito pequena, precisamos de tamanhos de amostra muito maiores.</p>
<p>A título de ilustração, vamos considerar a loteria. Na loteria, a chance de ganhar é menor que 1 em um milhão. Milhares de pessoas jogam, então o número de apostas é muito grande. Já o número de vencedores, a soma dos sorteados, varia entre 0 a 4. A distribuição normal não é uma boa aproximação da soma, portanto o Teorema do Limite Central não se aplica, mesmo quando o tamanho da amostra é muito grande. Isso geralmente é verdade quando a probabilidade de sucesso é muito baixa. Nesses casos, a distribuição de Poisson é mais apropriada.</p>
<p>Você pode examinar as propriedades da distribuição de Poisson usando <code>dpois</code> ou <code>ppois</code>. Você pode gerar variáveis aleatórias seguindo esta distribuição com <code>rpois</code>. No entanto, não discutimos a teoria aqui. Para saber mais sobre a distribuição de Poisson, você pode consultar qualquer livro de probabilidade ou até mesmo a Wikipedia<a href="#fn53" class="footnote-ref" id="fnref53"><sup>53</sup></a>.</p>
</div>
<div id="propriedades-estatísticas-das-médias" class="section level2" number="14.8">
<h2><span class="header-section-number">14.8</span> Propriedades estatísticas das médias</h2>
<p>Existem diversos resultados matemáticos úteis que usamos frequentemente para trabalhar com dados. Listamos alguns abaixo.</p>
<p>1. O valor esperado da soma das variáveis aleatórias é a soma do valor esperado de cada variável aleatória. Podemos escrever assim:</p>
<p><span class="math display">\[
\mbox{E}[X_1+X_2+\dots+X_n] = \mbox{E}[X_1] + \mbox{E}[X_2]+\dots+\mbox{E}[X_n]
\]</span></p>
<p>Se <span class="math inline">\(X\)</span> são eventos independentes das urnas, então todos têm o mesmo valor esperado. Vamos chamar isso de <span class="math inline">\(\mu\)</span>. Logo:</p>
<p><span class="math display">\[
\mbox{E}[X_1+X_2+\dots+X_n]= n\mu
\]</span></p>
<p>que é outra maneira de escrever o resultado mostrado acima para a soma dos eventos.</p>
<p>2. O valor esperado de uma constante não aleatória multiplicada por uma variável aleatória é a constante não aleatória multiplicada pelo valor esperado de uma variável aleatória. É mais fácil explicar com símbolos:</p>
<p><span class="math display">\[
\mbox{E}[aX] = a\times\mbox{E}[X]
\]</span></p>
<p>Para ver por que isso é intuitivo, considere alterar as unidades. Se mudarmos as unidades de uma variável aleatória, digamos de dólares para centavos, a expectativa deve mudar da mesma maneira. Uma consequência dos dois fatos anteriores é que o valor esperado da média de eventos independentes da mesma urna é o valor esperado da urna. Chame isso de <span class="math inline">\(\mu\)</span> novamente:</p>
<p><span class="math display">\[
\mbox{E}[(X_1+X_2+\dots+X_n)/ n]= \mbox{E}[X_1+X_2+\dots+X_n]/ n = n\mu/n = \mu
\]</span></p>
<p>3. O quadrado do erro padrão da soma das variáveis aleatórias <strong>independentes</strong> é a soma do quadrado do erro padrão de cada variável aleatória. É mais fácil entender matematicamente:</p>
<p><span class="math display">\[
\mbox{SE}[X_1+X_2+\dots+X_n] = \sqrt{\mbox{SE}[X_1]^2 + \mbox{SE}[X_2]^2+\dots+\mbox{SE}[X_n]^2 }
\]</span></p>
<p>O quadrado do erro padrão é chamado de variância (<em>variance</em>) nos livros didáticos de estatística. Observe que essa propriedade em particular não é tão intuitiva quanto as anteriores. Explicações mais detalhadas podem ser encontradas nos livros de estatística.</p>
<p>4. O erro padrão de uma constante não aleatória multiplicada por uma variável aleatória é a constante não aleatória multiplicada pelo erro padrão da variável aleatória. O mesmo que para o valor esperado:
<span class="math display">\[
\mbox{SE}[aX] = a \times \mbox{SE}[X]
\]</span></p>
<p>Para ver por que isso é intuitivo, pense novamente nas unidades.</p>
<p>Uma consequência de 3 e 4 é que o erro padrão da média de eventos independentes para a mesma urna é o desvio padrão da urna dividido pela raiz quadrada de <span class="math inline">\(n\)</span> (o número de eventos), chame isso de <span class="math inline">\(\sigma\)</span>:</p>
<p><span class="math display">\[
\begin{aligned}
\mbox{SE}[(X_1+X_2+\dots+X_n)/ n] &amp;= \mbox{SE}[X_1+X_2+\dots+X_n]/n \\
&amp;= \sqrt{\mbox{SE}[X_1]^2+\mbox{SE}[X_2]^2+\dots+\mbox{SE}[X_n]^2}/n \\
&amp;= \sqrt{\sigma^2+\sigma^2+\dots+\sigma^2}/n\\
&amp;= \sqrt{n\sigma^2}/n\\
&amp;= \sigma/ \sqrt{n}
\end{aligned}
\]</span></p>
<p>5. Se <span class="math inline">\(X\)</span> é uma variável aleatória distribuída normalmente e se <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span> são constantes não aleatórias, então <span class="math inline">\(aX + b\)</span> também é uma variável aleatória distribuída normalmente. Tudo o que estamos fazendo é alterar as unidades da variável aleatória multiplicando por <span class="math inline">\(a\)</span> e, em seguida, movendo o centro <span class="math inline">\(b\)</span>.</p>
<p>Note que os livros didáticos estatísticos usam as letras gregas <span class="math inline">\(\mu\)</span> e <span class="math inline">\(\sigma\)</span> para indicar o valor esperado e o erro padrão, respectivamente. Isto ocorre porque <span class="math inline">\(\mu\)</span> é a letra grega para <span class="math inline">\(m\)</span>, a primeira letra de <em>média</em>, que é outro termo usado para o valor esperado. Da mesma forma, <span class="math inline">\(\sigma\)</span> é a letra grega para <span class="math inline">\(s\)</span>, a primeira letra de <em>standard error</em> (erro padrão).</p>
</div>
<div id="lei-dos-grandes-números" class="section level2" number="14.9">
<h2><span class="header-section-number">14.9</span> Lei dos grandes números</h2>
<p>Uma implicação importante do resultado final é que o erro padrão da média se torna cada vez menor conforme <span class="math inline">\(n\)</span> torna-se maior. Quando <span class="math inline">\(n\)</span> é muito grande, então o erro padrão é praticamente 0 e a média dos eventos converge para a média da urna. Isso é conhecido nos livros estatísticos como a lei dos grandes números ou a lei das médias.</p>
<div id="interpretação-incorreta-da-lei-das-médias" class="section level3" number="14.9.1">
<h3><span class="header-section-number">14.9.1</span> Interpretação incorreta da lei das médias</h3>
<p>A lei das médias, às vezes, é mal interpretada. Por exemplo, se você jogar uma moeda cinco vezes e obter cara em todas, alguém pode argumentar que o próximo sorteio é provavelmente dará coroa devido à lei das médias: em média, devemos ver 50% cara e 50% coroa. Um argumento semelhante seria dizer que o resultado da roleta deve ser vermelho depois de ver que o preto apareceu cinco vezes seguidas. Esses eventos são independentes, portanto a probabilidade de se obter cara após girar uma moeda é de 50%, independentemente dos cinco resultados anteriores. Esse também é o caso do resultado da roleta. A lei das médias se aplica somente quando o número de eventos é muito grande e não em amostras pequenas. Após um milhão de jogadas, você definitivamente verá que cerca de 50% dos resultados serão cara, independentemente do resultado dos cinco primeiros lançamentos.</p>
<p>Outro interessante uso incorreto da lei das médias está nos esportes, quando, por exemplo, apresentadores de televisão prevêem que um jogador está prestes a ter sucesso porque falhou várias vezes seguidas.</p>
</div>
</div>
<div id="exercícios-24" class="section level2" number="14.10">
<h2><span class="header-section-number">14.10</span> Exercícios</h2>
<p>1. Nos jogos de roleta americanos, você também pode apostar no verde. Existem 18 vermelhos, 18 pretos e dois verdes (0 e 00). Quais são as chances de um verde sair?</p>
<p>2. O pagamento caso você acerte no verde é de $17 dólares. Isto significa que se você apostar um dólar e o resultado cair no verde, você ganha $17. Crie um modelo de amostragem usando uma amostra para simular a variável aleatória <span class="math inline">\(X\)</span> para seus ganhos. Dica: Veja o exemplo abaixo de como seria esse código para apostas no vermelho.</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="variáveis-aleatórias.html#cb521-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="sc">-</span><span class="dv">1</span>), <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="dv">9</span><span class="sc">/</span><span class="dv">19</span>, <span class="dv">10</span><span class="sc">/</span><span class="dv">19</span>))</span></code></pre></div>
<p>3. Qual é o valor esperado de <span class="math inline">\(X\)</span>?</p>
<p>4. Qual é o erro padrão de <span class="math inline">\(X\)</span>?</p>
<p>5. Agora crie uma variável aleatória <span class="math inline">\(S\)</span> que deve receber a soma dos seus ganhos depois de apostar no verde 1.000 vezes. Dica: altere os argumentos <code>size</code> e <code>replace</code> na sua resposta da pergunta 2. Inicie seu código configurando a semente aleatória como 1 usando <code>set.seed(1)</code>.</p>
<p>6. Qual é o valor esperado de <span class="math inline">\(S\)</span>?</p>
<p>7. Qual é o erro padrão de <span class="math inline">\(S\)</span>?</p>
<p>8. Qual é a probabilidade de você acabar ganhando dinheiro? Dica: use o TLC.</p>
<p>9. Crie uma simulação de Monte Carlo que gere 1.000 resultados a partir de <span class="math inline">\(S\)</span>. Calcule a média e o desvio padrão da lista resultante para confirmar os resultados das questões 6 e 7. Inicie seu código configurando a semente aleatória como 1 usando <code>set.seed(1)</code>.</p>
<p>10. Agora verifique sua resposta da pergunta 8 usando o resultado da simulação de Monte Carlo.</p>
<p>11. O resultado da simulação de Monte Carlo e a aproximação TLC estão próximos, mas não tão próximos. O que poderia explicar isso?</p>
<ol style="list-style-type: lower-alpha">
<li>1.000 simulações não são suficientes. Se fizermos mais, eles irão coincidir.</li>
<li>O TLC não funciona tão bem quando a probabilidade de sucesso é pequena. Nesse caso, era 1/19. Se aumentarmos o número de jogos de roleta, eles coincidirão melhor.</li>
<li>A diferença está dentro do erro de arredondamento.</li>
<li>O TLC funciona apenas para médias.</li>
</ol>
<p>12. Agora crie uma variável aleatória <span class="math inline">\(Y\)</span> que deve armazenar sua média de ganhos por aposta depois de apostar 1.000 vezes no verde.</p>
<p>13. Qual é o valor esperado de <span class="math inline">\(Y\)</span>?</p>
<p>14. Qual é o erro padrão de <span class="math inline">\(Y\)</span>?</p>
<p>15. Qual é a probabilidade de que, quando você terminar de jogar, os ganhos por jogo sejam positivos? Dica: use o TLC.</p>
<p>16. Crie uma simulação de Monte Carlo que gere 2.500 resultados a partir de <span class="math inline">\(Y\)</span>. Calcule a média e o desvio padrão da lista resultante para confirmar os resultados das questões 6 e 7. Inicie seu código configurando a semente aleatória como 1 usando <code>set.seed(1)</code>.</p>
<p>17. Agora verifique sua resposta da pergunta 8 usando o resultado da simulação de Monte Carlo.</p>
<p>18. O resultado da simulação de Monte Carlo e a aproximação TLC estão agora muito mais próximos. O que poderia explicar isso?</p>
<ol style="list-style-type: lower-alpha">
<li>Agora estamos calculando médias em vez de somas.</li>
<li>2.500 simulações de Monte Carlo não são melhores que 1.000.</li>
<li>O TLC funciona melhor quando o tamanho da amostra é maior. Aumentamos de 1.000 para 2.500.</li>
<li>Não está mais perto. A diferença está dentro do erro de arredondamento.</li>
</ol>

</div>
<div id="estudo-de-caso-the-big-short" class="section level2" number="14.11">
<h2><span class="header-section-number">14.11</span> Estudo de caso: <em>The Big Short</em></h2>
<div id="taxas-de-juros-explicadas-com-modelo-de-probabilidade" class="section level3" number="14.11.1">
<h3><span class="header-section-number">14.11.1</span> Taxas de juros explicadas com modelo de probabilidade</h3>
<p>Versões mais complexas dos modelos de amostragem que discutimos anteriormente também são utilizadas por bancos para determinar suas taxas de juros. Suponha que você administre um pequeno banco que tenha um histórico de identificação de possíveis proprietários em que se pode confiar para fazer pagamentos. De fato, historicamente, em um determinado ano, apenas 2% de seus clientes não pagam o dinheiro que lhes foi emprestado. No entanto, o banco sabe que se você simplesmente emprestar dinheiro a todos os seus clientes sem juros, você acabará perdendo dinheiro por causa desses 2%. Embora o banco saiba que provavelmente 2% de seus clientes não pagarão, eles não sabem quais serão esses clientes. Contudo, cobrando de todos um pouco mais de juros, eles podem compensar as perdas incorridas devido a esses 2% e também cobrir seus custos operacionais. Eles também podem obter lucro. Entretanto, se definirem taxas de juros muito altas, os clientes irão para um outro banco. Usaremos todos esses fatos e um pouco da teoria das probabilidades para determinar qual taxa de juros cobrar.</p>
<p>Suponha que seu banco faça 1.000 empréstimos de $180.000 este ano. Além disso, depois de somar todos os custos, suponha que seu banco perca $200.000 por cada execução hipotecária (quando o proprietário não paga as prestações e o banco retoma o imóvel). Para simplificar, assumimos que isso inclui todos os custos operacionais. Um modelo de amostragem para esse cenário pode ser codificado da seguinte maneira:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="variáveis-aleatórias.html#cb522-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb522-2"><a href="variáveis-aleatórias.html#cb522-2" aria-hidden="true" tabindex="-1"></a>loss_per_foreclosure <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">200000</span></span>
<span id="cb522-3"><a href="variáveis-aleatórias.html#cb522-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fl">0.02</span></span>
<span id="cb522-4"><a href="variáveis-aleatórias.html#cb522-4" aria-hidden="true" tabindex="-1"></a>defaults <span class="ot">&lt;-</span> <span class="fu">sample</span>( <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), n, <span class="at">prob=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">-</span>p, p), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb522-5"><a href="variáveis-aleatórias.html#cb522-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(defaults <span class="sc">*</span> loss_per_foreclosure)</span>
<span id="cb522-6"><a href="variáveis-aleatórias.html#cb522-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -3800000</span></span></code></pre></div>
<p>Observe que a perda total definida pela soma final é uma variável aleatória. Sempre que executar o código acima, você receberá uma resposta diferente. Podemos facilmente construir uma simulação de Monte Carlo para ter uma ideia da distribuição dessa variável aleatória.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="variáveis-aleatórias.html#cb523-1" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb523-2"><a href="variáveis-aleatórias.html#cb523-2" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> <span class="fu">replicate</span>(B, {</span>
<span id="cb523-3"><a href="variáveis-aleatórias.html#cb523-3" aria-hidden="true" tabindex="-1"></a>defaults <span class="ot">&lt;-</span> <span class="fu">sample</span>( <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), n, <span class="at">prob=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">-</span>p, p), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb523-4"><a href="variáveis-aleatórias.html#cb523-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(defaults <span class="sc">*</span> loss_per_foreclosure)</span>
<span id="cb523-5"><a href="variáveis-aleatórias.html#cb523-5" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<!--
Aqui está a distribuição dessa variável aleatória:
<img src="livro_files/figure-html/losses-distribution-1.png" width="70%" style="display: block; margin: auto;" />
-->
<p>Porém, realmente não precisamos de uma simulação de Monte Carlo. Usando o que aprendemos, o TLC nos diz que, como nossas perdas são uma soma de eventos independentes, sua distribuição é aproximadamente normal com o valor esperado e o erro padrão dados por:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="variáveis-aleatórias.html#cb524-1" aria-hidden="true" tabindex="-1"></a>n<span class="sc">*</span>(p<span class="sc">*</span>loss_per_foreclosure <span class="sc">+</span> (<span class="dv">1</span><span class="sc">-</span>p)<span class="sc">*</span><span class="dv">0</span>)</span>
<span id="cb524-2"><a href="variáveis-aleatórias.html#cb524-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -4e+06</span></span>
<span id="cb524-3"><a href="variáveis-aleatórias.html#cb524-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(n)<span class="sc">*</span><span class="fu">abs</span>(loss_per_foreclosure)<span class="sc">*</span><span class="fu">sqrt</span>(p<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p))</span>
<span id="cb524-4"><a href="variáveis-aleatórias.html#cb524-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 885438</span></span></code></pre></div>
<p>Agora podemos definir uma taxa de juros para garantir que, em média, alcancemos um ponto de equilíbrio. Basicamente, precisamos adicionar uma quantidade <span class="math inline">\(x\)</span> para cada empréstimo, que neste caso é representado pelos eventos, para que o valor esperado seja 0. Se definirmos <span class="math inline">\(l\)</span> para ser a perda por execução de hipoteca, precisamos:</p>
<p><span class="math display">\[
lp + x(1-p) = 0
\]</span></p>
<p>implicando que <span class="math inline">\(x\)</span> é:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="variáveis-aleatórias.html#cb525-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span> loss_per_foreclosure<span class="sc">*</span>p<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>p)</span>
<span id="cb525-2"><a href="variáveis-aleatórias.html#cb525-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4082</span></span></code></pre></div>
<p>ou uma taxa de juros de 0.023.</p>
<p>No entanto, ainda temos um problema. Embora essa taxa de juros garanta que, em média, eles atinjam um ponto de equilíbrio, há 50% de chance de perder dinheiro. Se o seu banco perder dinheiro, eles terão que fechá-lo. Portanto, devemos escolher uma taxa de juros que nos proteja disso. Ao mesmo tempo, se a taxa de juros for muito alta, seus clientes irão para outro banco; portanto, devemos estar dispostos a correr alguns riscos. Então, digamos que você queira que suas chances de perder dinheiro sejam de 1 em 100. O que a quantidade de <span class="math inline">\(x\)</span> deve ser agora? Isso é um pouco mais difícil. Nós queremos que a soma <span class="math inline">\(S\)</span> tenha:</p>
<p><span class="math display">\[\mbox{Pr}(S&lt;0) = 0.01\]</span></p>
<p>Sabemos que <span class="math inline">\(S\)</span> é aproximadamente normal. O valor esperado de <span class="math inline">\(S\)</span> é:</p>
<p><span class="math display">\[\mbox{E}[S] = \{ lp + x(1-p)\}n\]</span></p>
<p>com <span class="math inline">\(n\)</span> o número de seleções, que neste caso representa empréstimos. O erro padrão é:</p>
<p><span class="math display">\[\mbox{SD}[S] = |x-l| \sqrt{np(1-p)}.\]</span></p>
<p>Porque <span class="math inline">\(x\)</span> é positivo e <span class="math inline">\(l\)</span> negativo <span class="math inline">\(|x-l|=x-l\)</span>. Observe que essas são apenas aplicações das fórmulas mostradas acima, mas usam símbolos mais compactos.</p>
<p>Agora vamos usar um “truque” matemático que é muito comum em estatística. Adicionamos e subtraímos os mesmos valores aos dois lados do evento <span class="math inline">\(S&lt;0\)</span>. Isso é feito para que a probabilidade não mude e acabemos com uma variável aleatória normal padrão à esquerda, o que nos permitirá escrever uma equação com apenas <span class="math inline">\(x\)</span> como desconhecido. Esse “truque” é o seguinte:</p>
<p>Se <span class="math inline">\(\mbox{Pr}(S&lt;0) = 0.01\)</span>, então:</p>
<p><span class="math display">\[
\mbox{Pr}\left(\frac{S - \mbox{E}[S]}{\mbox{SE}[S]} &lt; \frac{ - \mbox{E}[S]}{\mbox{SE}[S]}\right)
\]</span>
E lembre-se disso <span class="math inline">\(\mbox{E}[S]\)</span> e <span class="math inline">\(\mbox{SE}[S]\)</span> são o valor esperado e o erro padrão de <span class="math inline">\(S\)</span>, respectivamente. Tudo o que fizemos acima foi somar e dividir pela mesma quantia em ambos os lados. Fizemos isso porque agora o termo à esquerda é uma variável aleatória normal padrão, à qual iremos renomear como <span class="math inline">\(Z\)</span>. Agora preenchemos os espaços em branco com a fórmula atual para o valor esperado e o erro padrão:</p>
<p><span class="math display">\[
\mbox{Pr}\left(Z &lt; \frac{- \{ lp + x(1-p)\}n}{(x-l) \sqrt{np(1-p)}}\right) = 0.01
\]</span></p>
<p>Pode parecer complicado, mas lembre-se de que <span class="math inline">\(l\)</span>, <span class="math inline">\(p\)</span> e <span class="math inline">\(n\)</span> todas são quantidades conhecidas, então em algum momento as substituiremos por números.</p>
<p>Agora como <span class="math inline">\(Z\)</span> é uma variável aleatória normal com valor esperado 0 e erro padrão 1, significa que a quantidade no lado direito do sinal &lt; deve ser igual a:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="variáveis-aleatórias.html#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qnorm</span>(<span class="fl">0.01</span>)</span>
<span id="cb526-2"><a href="variáveis-aleatórias.html#cb526-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -2.33</span></span></code></pre></div>
<p>para que a equação seja verdadeira. Lembre-se que <span class="math inline">\(z=\)</span> <code>qnorm(0.01)</code> nos dá o valor de <span class="math inline">\(z\)</span> para qual:</p>
<p><span class="math display">\[
\mbox{Pr}(Z \leq z) = 0.01
\]</span></p>
<p>Isso significa que o lado direito da complicada equação deve ser <span class="math inline">\(z\)</span>=<code>qnorm(0.01)</code>:</p>
<p><span class="math display">\[
\frac{- \{ lp + x(1-p)\}n} {(x-l) \sqrt{n p (1-p)}} = z
\]</span></p>
<p>O truque funciona porque acabamos com uma expressão que contém <span class="math inline">\(x\)</span>, que sabemos que deve ser igual a uma quantidade conhecida <span class="math inline">\(z\)</span>. Resolver <span class="math inline">\(x\)</span> agora é simplesmente álgebra:</p>
<p><span class="math display">\[ x = - l \frac{ np - z \sqrt{np(1-p)}}{n(1-p) + z \sqrt{np(1-p)}}\]</span></p>
<p>que é:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="variáveis-aleatórias.html#cb527-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> loss_per_foreclosure</span>
<span id="cb527-2"><a href="variáveis-aleatórias.html#cb527-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="fl">0.01</span>)</span>
<span id="cb527-3"><a href="variáveis-aleatórias.html#cb527-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span>l<span class="sc">*</span>( n<span class="sc">*</span>p <span class="sc">-</span> z<span class="sc">*</span><span class="fu">sqrt</span>(n<span class="sc">*</span>p<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p)))<span class="sc">/</span> ( n<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p) <span class="sc">+</span> z<span class="sc">*</span><span class="fu">sqrt</span>(n<span class="sc">*</span>p<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p)))</span>
<span id="cb527-4"><a href="variáveis-aleatórias.html#cb527-4" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb527-5"><a href="variáveis-aleatórias.html#cb527-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6249</span></span></code></pre></div>
<p>Nossa taxa de juros agora sobe para 0.035. Ainda é uma taxa de juros muito competitiva. Ao escolher essa taxa de juros, agora teremos um retorno esperado do empréstimo de:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="variáveis-aleatórias.html#cb528-1" aria-hidden="true" tabindex="-1"></a>loss_per_foreclosure<span class="sc">*</span>p <span class="sc">+</span> x<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p)</span>
<span id="cb528-2"><a href="variáveis-aleatórias.html#cb528-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2124</span></span></code></pre></div>
<p>que é um lucro total esperado de cerca de:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="variáveis-aleatórias.html#cb529-1" aria-hidden="true" tabindex="-1"></a>n<span class="sc">*</span>(loss_per_foreclosure<span class="sc">*</span>p <span class="sc">+</span> x<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p))</span>
<span id="cb529-2"><a href="variáveis-aleatórias.html#cb529-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2124198</span></span></code></pre></div>
<p>dólares!</p>
<p>Podemos executar uma simulação de Monte Carlo para verificar nossas aproximações teóricas:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="variáveis-aleatórias.html#cb530-1" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">100000</span></span>
<span id="cb530-2"><a href="variáveis-aleatórias.html#cb530-2" aria-hidden="true" tabindex="-1"></a>profit <span class="ot">&lt;-</span> <span class="fu">replicate</span>(B, {</span>
<span id="cb530-3"><a href="variáveis-aleatórias.html#cb530-3" aria-hidden="true" tabindex="-1"></a>draws <span class="ot">&lt;-</span> <span class="fu">sample</span>( <span class="fu">c</span>(x, loss_per_foreclosure), n,</span>
<span id="cb530-4"><a href="variáveis-aleatórias.html#cb530-4" aria-hidden="true" tabindex="-1"></a><span class="at">prob=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">-</span>p, p), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb530-5"><a href="variáveis-aleatórias.html#cb530-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(draws)</span>
<span id="cb530-6"><a href="variáveis-aleatórias.html#cb530-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb530-7"><a href="variáveis-aleatórias.html#cb530-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(profit)</span>
<span id="cb530-8"><a href="variáveis-aleatórias.html#cb530-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2127914</span></span>
<span id="cb530-9"><a href="variáveis-aleatórias.html#cb530-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(profit<span class="sc">&lt;</span><span class="dv">0</span>)</span>
<span id="cb530-10"><a href="variáveis-aleatórias.html#cb530-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0119</span></span></code></pre></div>
</div>
<div id="the-big-short" class="section level3" number="14.11.2">
<h3><span class="header-section-number">14.11.2</span> <em>The Big Short</em></h3>
<p>Um de seus funcionários ressalta que, como o banco está ganhando 2.124 dólares por empréstimo, o banco deveria fazer mais empréstimos! Por que apenas <span class="math inline">\(n\)</span>? Você explica que encontrar aqueles <span class="math inline">\(n\)</span> clientes foi difícil. Você precisa de um grupo que seja previsível e que mantenha as chances de inadimplência baixas. Seu funcionário então ressalta que, mesmo que a probabilidade de inadimplência seja maior, desde que o valor esperado seja positivo, o banco pode minimizar sua probabilidade de perda aumentando <span class="math inline">\(n\)</span> e confiando na lei dos grandes números.</p>
<p>Seu funcionário afirma ainda que, mesmo que a taxa de inadimplência seja duas vezes mais alta, digamos 4%, se definirmos a taxa um pouco mais alta do que esse valor:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="variáveis-aleatórias.html#cb531-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fl">0.04</span></span>
<span id="cb531-2"><a href="variáveis-aleatórias.html#cb531-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> (<span class="sc">-</span> loss_per_foreclosure<span class="sc">*</span>p<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>p))<span class="sc">/</span> <span class="dv">180000</span></span>
<span id="cb531-3"><a href="variáveis-aleatórias.html#cb531-3" aria-hidden="true" tabindex="-1"></a>r</span>
<span id="cb531-4"><a href="variáveis-aleatórias.html#cb531-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0463</span></span></code></pre></div>
<p>o banco irá lucrar. Em 5%, temos a garantia de um valor positivo esperado de:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="variáveis-aleatórias.html#cb532-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fl">0.05</span></span>
<span id="cb532-2"><a href="variáveis-aleatórias.html#cb532-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> r<span class="sc">*</span><span class="dv">180000</span></span>
<span id="cb532-3"><a href="variáveis-aleatórias.html#cb532-3" aria-hidden="true" tabindex="-1"></a>loss_per_foreclosure<span class="sc">*</span>p <span class="sc">+</span> x <span class="sc">*</span> (<span class="dv">1</span><span class="sc">-</span>p)</span>
<span id="cb532-4"><a href="variáveis-aleatórias.html#cb532-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 640</span></span></code></pre></div>
<p>e podemos minimizar as chances de perder dinheiro simplesmente aumentando <span class="math inline">\(n\)</span> já que:</p>
<p><span class="math display">\[
\mbox{Pr}(S &lt; 0) =
\mbox{Pr}\left(Z &lt; - \frac{\mbox{E}[S]}{\mbox{SE}[S]}\right)
\]</span></p>
<p>com <span class="math inline">\(Z\)</span> uma variável aleatória normal padrão, como mostrado acima. Se definirmos <span class="math inline">\(\mu\)</span> e <span class="math inline">\(\sigma\)</span> como o valor esperado e o desvio padrão da urna, respectivamente (ou seja, de um único empréstimo), usando as fórmulas anteriores, temos: <span class="math inline">\(\mbox{E}[S]= n\mu\)</span> e <span class="math inline">\(\mbox{SE}[S]= \sqrt{n}\sigma\)</span>. Então, se definirmos <span class="math inline">\(z\)</span>=<code>qnorm(0.01)</code>, temos:
<span class="math display">\[
- \frac{n\mu}{\sqrt{n}\sigma} = - \frac{\sqrt{n}\mu}{\sigma} = z
\]</span>
o que implica que, se permitirmos:</p>
<p><span class="math display">\[
n \geq z^2 \sigma^2/ \mu^2
\]</span>
temos uma probabilidade garantida inferior a 0,01. A implicação é que, desde que <span class="math inline">\(\mu\)</span> seja positivo, podemos encontrar um <span class="math inline">\(n\)</span> que minimiza a probabilidade de uma perda. Esta é uma versão da lei dos grandes números: quando <span class="math inline">\(n\)</span> é grande, nosso lucro médio por empréstimo converge para o ganho esperado <span class="math inline">\(\mu\)</span>.</p>
<p>Com <span class="math inline">\(x\)</span> fixo, agora podemos perguntar qual valor de <span class="math inline">\(n\)</span> precisamos para que a probabilidade ser 0,01? No nosso exemplo, se distribuirmos:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="variáveis-aleatórias.html#cb533-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="fl">0.01</span>)</span>
<span id="cb533-2"><a href="variáveis-aleatórias.html#cb533-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">ceiling</span>((z<span class="sc">^</span><span class="dv">2</span><span class="sc">*</span>(x<span class="sc">-</span>l)<span class="sc">^</span><span class="dv">2</span><span class="sc">*</span>p<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p))<span class="sc">/</span>(l<span class="sc">*</span>p <span class="sc">+</span> x<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>p))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb533-3"><a href="variáveis-aleatórias.html#cb533-3" aria-hidden="true" tabindex="-1"></a>n</span>
<span id="cb533-4"><a href="variáveis-aleatórias.html#cb533-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 22163</span></span></code></pre></div>
<p>empréstimos, a probabilidade de perda é de aproximadamente 0,01 e esperamos ganhar um total de:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="variáveis-aleatórias.html#cb534-1" aria-hidden="true" tabindex="-1"></a>n<span class="sc">*</span>(loss_per_foreclosure<span class="sc">*</span>p <span class="sc">+</span> x <span class="sc">*</span> (<span class="dv">1</span><span class="sc">-</span>p))</span>
<span id="cb534-2"><a href="variáveis-aleatórias.html#cb534-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 14184320</span></span></code></pre></div>
<p>dólares! Podemos confirmar isso com uma simulação de Monte Carlo:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="variáveis-aleatórias.html#cb535-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fl">0.04</span></span>
<span id="cb535-2"><a href="variáveis-aleatórias.html#cb535-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">0.05</span><span class="sc">*</span><span class="dv">180000</span></span>
<span id="cb535-3"><a href="variáveis-aleatórias.html#cb535-3" aria-hidden="true" tabindex="-1"></a>profit <span class="ot">&lt;-</span> <span class="fu">replicate</span>(B, {</span>
<span id="cb535-4"><a href="variáveis-aleatórias.html#cb535-4" aria-hidden="true" tabindex="-1"></a>draws <span class="ot">&lt;-</span> <span class="fu">sample</span>( <span class="fu">c</span>(x, loss_per_foreclosure), n,</span>
<span id="cb535-5"><a href="variáveis-aleatórias.html#cb535-5" aria-hidden="true" tabindex="-1"></a><span class="at">prob=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">-</span>p, p), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb535-6"><a href="variáveis-aleatórias.html#cb535-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(draws)</span>
<span id="cb535-7"><a href="variáveis-aleatórias.html#cb535-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb535-8"><a href="variáveis-aleatórias.html#cb535-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(profit)</span>
<span id="cb535-9"><a href="variáveis-aleatórias.html#cb535-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 14197027</span></span></code></pre></div>
<p>Portanto, essa parece ser uma decisão óbvia. Como resultado, seu funcionário decide deixar o banco e abrir sua própria empresa de empréstimos hipotecários de alto risco. Alguns meses depois, o banco de seu ex-funcionário declara falência. Um livro é escrito e, eventualmente, um filme é feito contando o erro cometido por seu funcionário e muitos outros. O que aconteceu?</p>
<p>O esquema de seu ex-funcionário foi baseado principalmente nesta fórmula matemática:
<span class="math display">\[
\mbox{SE}[(X_1+X_2+\dots+X_n)/ n] = \sigma/ \sqrt{n}
\]</span></p>
<p>Ao fazer <span class="math inline">\(n\)</span> grande, minimizamos o erro padrão do nosso lucro por empréstimo. No entanto, para que esta regra seja seguida, os <span class="math inline">\(X\)</span>s devem ser eventos independentes: a inadimplência de uma pessoa deve ser independente da inadimplência de outras pessoas. Observe que, no caso de calcular a média do <strong>mesmo</strong> evento repetidamente, um exemplo extremo de eventos que não são independentes, obtemos um erro padrão que é <span class="math inline">\(\sqrt{n}\)</span> vezes maior:
<span class="math display">\[
\mbox{SE}[(X_1+X_1+\dots+X_1)/ n] = \mbox{SE}[n X_1/ n] = \sigma &gt; \sigma/ \sqrt{n}
\]</span></p>
<p>Para criar uma simulação mais realista do que a simulação original executada por seu colega, vamos assumir que haja um evento global que afete todas as pessoas com hipotecas de alto risco e mude sua probabilidade de pagamento. Assumiremos que, com uma probabilidade de 50 a 50, todas as probabilidades aumentam ou diminuem levemente para algo entre 0,03 e 0,05. Mas isso acontece com todos de uma vez, não apenas com uma pessoa. Esses eventos não são mais independentes.</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="variáveis-aleatórias.html#cb536-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fl">0.04</span></span>
<span id="cb536-2"><a href="variáveis-aleatórias.html#cb536-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">0.05</span><span class="sc">*</span><span class="dv">180000</span></span>
<span id="cb536-3"><a href="variáveis-aleatórias.html#cb536-3" aria-hidden="true" tabindex="-1"></a>profit <span class="ot">&lt;-</span> <span class="fu">replicate</span>(B, {</span>
<span id="cb536-4"><a href="variáveis-aleatórias.html#cb536-4" aria-hidden="true" tabindex="-1"></a>new_p <span class="ot">&lt;-</span> <span class="fl">0.04</span> <span class="sc">+</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="sc">-</span><span class="fl">0.01</span>, <span class="fl">0.01</span>, <span class="at">length =</span> <span class="dv">100</span>), <span class="dv">1</span>)</span>
<span id="cb536-5"><a href="variáveis-aleatórias.html#cb536-5" aria-hidden="true" tabindex="-1"></a>draws <span class="ot">&lt;-</span> <span class="fu">sample</span>( <span class="fu">c</span>(x, loss_per_foreclosure), n,</span>
<span id="cb536-6"><a href="variáveis-aleatórias.html#cb536-6" aria-hidden="true" tabindex="-1"></a><span class="at">prob=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">-</span>new_p, new_p), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb536-7"><a href="variáveis-aleatórias.html#cb536-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(draws)</span>
<span id="cb536-8"><a href="variáveis-aleatórias.html#cb536-8" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>Observe que o lucro esperado ainda é grande:</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="variáveis-aleatórias.html#cb537-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(profit)</span>
<span id="cb537-2"><a href="variáveis-aleatórias.html#cb537-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 14211829</span></span></code></pre></div>
<p>Entretanto, a probabilidade de o banco ter ganhos negativos dispara:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="variáveis-aleatórias.html#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(profit<span class="sc">&lt;</span><span class="dv">0</span>)</span>
<span id="cb538-2"><a href="variáveis-aleatórias.html#cb538-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.348</span></span></code></pre></div>
<p>Ainda mais preocupante é que a probabilidade de perder mais de US$ 10 milhões é:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="variáveis-aleatórias.html#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(profit <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">10000000</span>)</span>
<span id="cb539-2"><a href="variáveis-aleatórias.html#cb539-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.239</span></span></code></pre></div>
<p>Para entender como isso acontece, veja a distribuição:</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="variáveis-aleatórias.html#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">profit_in_millions=</span>profit<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb540-2"><a href="variáveis-aleatórias.html#cb540-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(profit_in_millions)) <span class="sc">+</span></span>
<span id="cb540-3"><a href="variáveis-aleatórias.html#cb540-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_histogram</span>(<span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">binwidth =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/profit-distribution-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>A teoria quebra completamente e a variável aleatória tem muito mais variabilidade do que o esperado. O colapso financeiro de 2007 ocorreu, dentre outras coisas, a “especialistas” financeiros que assumiram a independência quando não era esse o caso.</p>
</div>
</div>
<div id="exercícios-25" class="section level2" number="14.12">
<h2><span class="header-section-number">14.12</span> Exercícios</h2>
<p>1. Crie uma variável aleatória <span class="math inline">\(S\)</span> com os ganhos do seu banco, se você fizer 10.000 empréstimos, a uma taxa de juros de 0,3 e uma perda $200.000 em cada execução de hipoteca (retomada de propriedade). Dica: use o código que mostramos na seção anterior, mas altere os parâmetros.</p>
<p>2. Execute uma simulação de Monte Carlo com 10.000 resultados para <span class="math inline">\(S\)</span>. Faça um histograma dos resultados.</p>
<p>3. Qual é o valor esperado de <span class="math inline">\(S\)</span>?</p>
<p>4. Qual é o erro padrão de <span class="math inline">\(S\)</span>?</p>
<p>5. Suponha que façamos empréstimos de $180.000. Qual deve ser a taxa de juros para o nosso valor esperado ser 0?</p>
<p>6. (Difícil) Qual deve ser a taxa de juros para que a probabilidade de perda de dinheiro seja de uma em 20? Em notação matemática, qual deve ser a taxa de juros para <span class="math inline">\(\mbox{Pr}(S&lt;0) = 0.05\)</span>?</p>
<p>7. Se o banco deseja minimizar as chances de perder dinheiro, qual das seguintes opções <strong>não</strong> faz com que as taxas de juros subam?</p>
<ol style="list-style-type: lower-alpha">
<li>Um grupo menor de empréstimos.</li>
<li>Uma maior probabilidade de inadimplência.</li>
<li>Uma menor probabilidade necessária de perda de dinheiro.</li>
<li>O número de simulações de Monte Carlo.</li>
</ol>

</div>
</div>


























































<div class="footnotes">
<hr />
<ol start="51">
<li id="fn51"><p><a href="https://pt.wikipedia.org/wiki/Crise_financeira_de_2007–2008" class="uri">https://pt.wikipedia.org/wiki/Crise_financeira_de_2007–2008</a><a href="variáveis-aleatórias.html#fnref51" class="footnote-back">↩︎</a></p></li>
<li id="fn52"><p><a href="https://pt.wikipedia.org/wiki/Distribuição_binomial" class="uri">https://pt.wikipedia.org/wiki/Distribuição_binomial</a><a href="variáveis-aleatórias.html#fnref52" class="footnote-back">↩︎</a></p></li>
<li id="fn53"><p><a href="https://en.wikipedia.org/w/index.php?title=Poisson_distribution" class="uri">https://en.wikipedia.org/w/index.php?title=Poisson_distribution</a><a href="variáveis-aleatórias.html#fnref53" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="probabilidade.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rafalab/dslivro/edit/master/prob/random-variables-sampling-models-clt.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["livro.pdf", "livro.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
